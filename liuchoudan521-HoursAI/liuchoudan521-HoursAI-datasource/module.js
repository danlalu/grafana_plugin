/*! For license information please see module.js.LICENSE.txt */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((e,t,n,r,i,o)=>(()=>{var s=[(e,t,n)=>{var r,i,o,s,a,l,u,c,f,h,p=n(2),d=n(1),g=(r=d)&&"object"==typeof r&&"default"in r?r.default:r,y=n(5),m=n(3),v=n(4),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function b(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function E(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function w(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function T(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function x(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function S(e,n){var r,i,o,s=null==e?void 0:e.getPreviousNonWhiteSpaceToken(),a=null==e?void 0:e.getPreviousKeyword(),l=null===(o=null==e?void 0:e.getPreviousNonWhiteSpaceToken())||void 0===o?void 0:o.is(t.iv.Operator,"/"),u=n.list(),c=[];try{for(var f=T(u),h=f.next();!h.done;h=f.next()){var p=h.value;p.resolve(e,null!=a?a:null,null!=s?s:null,Boolean(l))&&c.push(p.id)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return 0===c.length?[t.fC.Unknown]:c}(i=t.$M||(t.$M={}))[i.Comparison=0]="Comparison",i[i.Logical=1]="Logical",(o=t.mB||(t.mB={}))[o.Value=0]="Value",o[o.Filter=1]="Filter",o[o.Group=2]="Group",o[o.Column=3]="Column",o[o.Table=4]="Table",(s=t.iv||(t.iv={})).Parenthesis="delimiter.parenthesis.sql",s.Whitespace="white.sql",s.Keyword="keyword.sql",s.Delimiter="delimiter.sql",s.Operator="operator.sql",s.Identifier="identifier.sql",s.IdentifierQuote="identifier.quote.sql",s.Type="type.sql",s.Function="predefined.sql",s.Number="number.sql",s.String="string.sql",s.Variable="variable.sql",(a=t.fC||(t.fC={})).Unknown="unknown",a.SelectKeyword="selectKeyword",a.WithKeyword="withKeyword",a.AfterSelectKeyword="afterSelectKeyword",a.AfterSelectArguments="afterSelectArguments",a.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",a.SelectAlias="selectAlias",a.AfterFromKeyword="afterFromKeyword",a.AfterTable="afterTable",a.SchemaFuncFirstArgument="schemaFuncFirstArgument",a.SchemaFuncExtraArgument="schemaFuncExtraArgument",a.FromKeyword="fromKeyword",a.AfterFrom="afterFrom",a.WhereKeyword="whereKeyword",a.WhereComparisonOperator="whereComparisonOperator",a.WhereValue="whereValue",a.AfterWhereFunctionArgument="afterWhereFunctionArgument",a.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",a.AfterWhereValue="afterWhereValue",a.AfterGroupByKeywords="afterGroupByKeywords",a.AfterGroupBy="afterGroupBy",a.AfterOrderByKeywords="afterOrderByKeywords",a.AfterOrderByFunction="afterOrderByFunction",a.AfterOrderByDirection="afterOrderByDirection",a.AfterIsOperator="afterIsOperator",a.AfterIsNotOperator="afterIsNotOperator",a.AfterSchema="afterSchema",(l=t.is||(t.is={})).Schemas="schemas",l.Tables="tables",l.Columns="columns",l.SelectKeyword="selectKeyword",l.WithKeyword="withKeyword",l.FunctionsWithArguments="functionsWithArguments",l.FromKeyword="fromKeyword",l.WhereKeyword="whereKeyword",l.GroupByKeywords="groupByKeywords",l.OrderByKeywords="orderByKeywords",l.FunctionsWithoutArguments="functionsWithoutArguments",l.LimitKeyword="limitKeyword",l.SortOrderDirectionKeyword="sortOrderDirectionKeyword",l.ComparisonOperators="comparisonOperators",l.LogicalOperators="logicalOperators",l.SelectMacro="selectMacro",l.TableMacro="tableMacro",l.FilterMacro="filterMacro",l.GroupMacro="groupMacro",l.BoolValues="boolValues",l.NullValue="nullValue",l.NotKeyword="notKeyword",l.TemplateVariables="templateVariables",l.StarWildCard="starWildCard",(u=t.G8||(t.G8={})).High="a",u.MediumHigh="d",u.Medium="g",u.MediumLow="k",u.Low="q",(c=t.cm||(t.cm={}))[c.Method=0]="Method",c[c.Function=1]="Function",c[c.Constructor=2]="Constructor",c[c.Field=3]="Field",c[c.Variable=4]="Variable",c[c.Class=5]="Class",c[c.Struct=6]="Struct",c[c.Interface=7]="Interface",c[c.Module=8]="Module",c[c.Property=9]="Property",c[c.Event=10]="Event",c[c.Operator=11]="Operator",c[c.Unit=12]="Unit",c[c.Value=13]="Value",c[c.Constant=14]="Constant",c[c.Enum=15]="Enum",c[c.EnumMember=16]="EnumMember",c[c.Keyword=17]="Keyword",c[c.Text=18]="Text",c[c.Color=19]="Color",c[c.File=20]="File",c[c.Reference=21]="Reference",c[c.Customcolor=22]="Customcolor",c[c.Folder=23]="Folder",c[c.TypeParameter=24]="TypeParameter",c[c.User=25]="User",c[c.Issue=26]="Issue",c[c.Snippet=27]="Snippet",(f=t.a7||(t.a7={}))[f.KeepWhitespace=1]="KeepWhitespace",f[f.InsertAsSnippet=4]="InsertAsSnippet",(h=t.je||(t.je={})).Builder="builder",h.Code="code";var R=function(e,n,r,i,o){return E(void 0,void 0,void 0,(function(){var s,a,l,u,c,f,h,p,d,g,y;return w(this,(function(m){switch(m.label){case 0:s=[],a=(null==n?void 0:n.isWhiteSpace())||(null==n?void 0:n.isParenthesis())||(null==n?void 0:n.isIdentifier())&&n.value.endsWith("."),l=a||!(null==n?void 0:n.range)?e.Range.fromPositions(i.position):null==n?void 0:n.range,m.label=1;case 1:m.trys.push([1,6,7,8]),u=T(x([],q(new Set(r)),!1)),c=u.next(),m.label=2;case 2:return c.done?[3,5]:(f=c.value,(h=o.getIfExists(f))?[4,h.suggestions(O(O({},i),{range:l}),e)]:[3,4]);case 3:p=m.sent(),s=x(x([],q(s),!1),q(p.map((function(e){return function(e,n,r){return void 0===r&&(r={}),O({label:e,insertText:e,kind:t.cm.Field,sortText:t.G8.Medium,range:n},r)}(e.label,l,O({kind:e.kind},e))}))),!1),m.label=4;case 4:return c=u.next(),[3,2];case 5:return[3,8];case 6:return d=m.sent(),g={error:d},[3,8];case 7:try{c&&!c.done&&(y=u.return)&&y.call(u)}finally{if(g)throw g.error}return[7];case 8:return[2,Promise.resolve(s)]}}))}))},C=function(){return[{id:t.fC.SelectKeyword,name:t.fC.SelectKeyword,kind:[t.is.SelectKeyword]},{id:t.fC.WithKeyword,name:t.fC.WithKeyword,kind:[t.is.WithKeyword]},{id:t.fC.AfterSelectKeyword,name:t.fC.AfterSelectKeyword,kind:[t.is.StarWildCard,t.is.FunctionsWithArguments,t.is.Columns,t.is.SelectMacro]},{id:t.fC.AfterSelectFuncFirstArgument,name:t.fC.AfterSelectFuncFirstArgument,kind:[t.is.Columns]},{id:t.fC.AfterGroupByFunctionArgument,name:t.fC.AfterGroupByFunctionArgument,kind:[t.is.Columns]},{id:t.fC.AfterWhereFunctionArgument,name:t.fC.AfterWhereFunctionArgument,kind:[t.is.Columns]},{id:t.fC.AfterSelectArguments,name:t.fC.AfterSelectArguments,kind:[t.is.Columns]},{id:t.fC.AfterFromKeyword,name:t.fC.AfterFromKeyword,kind:[t.is.Schemas,t.is.Tables,t.is.TableMacro]},{id:t.fC.AfterSchema,name:t.fC.AfterSchema,kind:[t.is.Tables,t.is.TableMacro]},{id:t.fC.SelectAlias,name:t.fC.SelectAlias,kind:[t.is.Columns,t.is.FunctionsWithArguments]},{id:t.fC.FromKeyword,name:t.fC.FromKeyword,kind:[t.is.FromKeyword]},{id:t.fC.AfterFrom,name:t.fC.AfterFrom,kind:[t.is.WhereKeyword,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.AfterTable,name:t.fC.AfterTable,kind:[t.is.WhereKeyword,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.WhereKeyword,name:t.fC.WhereKeyword,kind:[t.is.Columns,t.is.FilterMacro,t.is.TemplateVariables]},{id:t.fC.WhereComparisonOperator,name:t.fC.WhereComparisonOperator,kind:[t.is.ComparisonOperators]},{id:t.fC.WhereValue,name:t.fC.WhereValue,kind:[t.is.FilterMacro,t.is.TemplateVariables]},{id:t.fC.AfterWhereValue,name:t.fC.AfterWhereValue,kind:[t.is.LogicalOperators,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword,t.is.Columns,t.is.TemplateVariables]},{id:t.fC.AfterGroupByKeywords,name:t.fC.AfterGroupByKeywords,kind:[t.is.GroupMacro,t.is.Columns]},{id:t.fC.AfterGroupBy,name:t.fC.AfterGroupBy,kind:[t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.AfterOrderByKeywords,name:t.fC.AfterOrderByKeywords,kind:[t.is.Columns]},{id:t.fC.AfterOrderByFunction,name:t.fC.AfterOrderByFunction,kind:[t.is.SortOrderDirectionKeyword,t.is.LimitKeyword]},{id:t.fC.AfterOrderByDirection,name:t.fC.AfterOrderByDirection,kind:[t.is.LimitKeyword]},{id:t.fC.AfterIsOperator,name:t.fC.AfterOrderByDirection,kind:[t.is.NotKeyword,t.is.NullValue,t.is.BoolValues]},{id:t.fC.AfterIsNotOperator,name:t.fC.AfterOrderByDirection,kind:[t.is.NullValue,t.is.BoolValues]}]},A=function(){function e(e,t,n,r,i){this.type=e,this.value=t,this.range=n,this.previous=r,this.next=i}return e.prototype.isKeyword=function(){return this.type===t.iv.Keyword},e.prototype.isWhiteSpace=function(){return this.type===t.iv.Whitespace},e.prototype.isParenthesis=function(){return this.type===t.iv.Parenthesis},e.prototype.isIdentifier=function(){return this.type===t.iv.Identifier},e.prototype.isString=function(){return this.type===t.iv.String},e.prototype.isNumber=function(){return this.type===t.iv.Number},e.prototype.isDoubleQuotedString=function(){return this.type===t.iv.Type},e.prototype.isVariable=function(){return this.type===t.iv.Variable},e.prototype.isFunction=function(){return this.type===t.iv.Function},e.prototype.isOperator=function(){return this.type===t.iv.Operator},e.prototype.isTemplateVariable=function(){return this.type===t.iv.Variable},e.prototype.is=function(e,t){var n=this.type===e;return void 0!==t?n&&k(e,this,t):n},e.prototype.getPreviousNonWhiteSpaceToken=function(){for(var e=this.previous;null!=e;){if(!e.isWhiteSpace())return e;e=e.previous}return null},e.prototype.getPreviousOfType=function(e,t){for(var n=this.previous;null!=n;){var r=n.type===e;if(void 0!==t?r&&k(e,n,t):r)return n;n=n.previous}return null},e.prototype.getPreviousUntil=function(e,t,n){for(var r=[],i=this.previous;null!=i;)if(t.some((function(e){return e===(null==i?void 0:i.type)})))i=i.previous;else{var o=i.type===e;if(void 0!==n?o&&k(e,i,n):o)return r;i.isWhiteSpace()||r.push(i),i=i.previous}return r},e.prototype.getNextUntil=function(e,t,n){for(var r=[],i=this.next;null!=i;)if(t.some((function(e){return e===(null==i?void 0:i.type)})))i=i.next;else{var o=i.type===e;if(void 0!==n?o&&k(e,i,n):o)return r;i.isWhiteSpace()||r.push(i),i=i.next}return r},e.prototype.getPreviousKeyword=function(){for(var e=this.previous;null!=e;){if(e.isKeyword())return e;e=e.previous}return null},e.prototype.getNextNonWhiteSpaceToken=function(){for(var e=this.next;null!=e;){if(!e.isWhiteSpace())return e;e=e.next}return null},e.prototype.getNextOfType=function(e,t){for(var n=this.next;null!=n;){var r=n.type===e;if(void 0!==t?r&&k(e,n,t):r)return n;n=n.next}return null},e}();function k(e,n,r){return e===t.iv.Keyword||e===t.iv.Operator?n.value.toLowerCase()===r.toString().toLowerCase():n.value===r}function P(e,n,r,i){var o;void 0===i&&(i="sql");for(var s=null,a=null,l=e.editor.tokenize(null!==(o=n.getValue())&&void 0!==o?o:"",i),u=0;u<l.length;u++){var c=l[u];if(!c.length&&a){var f={offset:0,type:t.iv.Whitespace,language:i,_tokenBrand:void 0};c.push(f)}for(var h=0;h<c.length;h++){f=c[h];var p=c.length>h+1?c[h+1].offset+1:n.getLineLength(u+1)+1,d={startLineNumber:u+1,startColumn:0===f.offset?0:f.offset+1,endLineNumber:u+1,endColumn:p},g=n.getValueInRange(d),y=new A(f.type,g,d,a,null);e.Range.containsPosition(d,r)&&(s=y),a&&(a.next=y),a=y}}return s}var _,N="select",I="from",L="by",D="desc",$="asc",M=["=","!="],Q=x([],q(M),!1),F={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},B={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT","ABSOLUTE","ACTION","ADA","ADD","AFTER","ALL","ALLOCATE","ALTER","ALWAYS","ANALYZE","AND","ANY","ARE","AS","ASC","ASSERTION","AT","ATTACH","AUTHORIZATION","AUTOINCREMENT","AVG","BACKUP","BEFORE","BEGIN","BETWEEN","BIT","BIT_LENGTH","BOTH","BREAK","BROWSE","BULK","BY","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLLATION","COLUMN","COMMIT","COMPUTE","CONFLICT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CORRESPONDING","COUNT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DAY","DBCC","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DETACH","DIAGNOSTICS","DISCONNECT","DISK","DISTINCT","DISTRIBUTED","DO","DOMAIN","DOUBLE","DROP","DUMP","EACH","ELSE","END","END-EXEC","ERRLVL","ESCAPE","EXCEPT","EXCEPTION","EXCLUDE","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTERNAL","EXTRACT","FAIL","FALSE","FETCH","FILE","FILLFACTOR","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GENERATED","GET","GLOB","GLOBAL","GO","GOTO","GRANT","GROUP","GROUPS","HAVING","HOLDLOCK","HOUR","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IGNORE","IMMEDIATE","IN","INCLUDE","INDEX","INDEXED","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","IS","ISNULL","ISOLATION","JOIN","KEY","KILL","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LIMIT","LINENO","LOAD","LOCAL","LOWER","MATCH","MATERIALIZED","MAX","MERGE","MIN","MINUTE","MODULE","MONTH","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOCHECK","NONCLUSTERED","NONE","NOT","NOTHING","NOTNULL","NULL","NULLIF","NULLS","NUMERIC","OCTET_LENGTH","OF","OFF","OFFSET","OFFSETS","ON","ONLY","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OTHERS","OUTER","OUTPUT","OVER","OVERLAPS","PAD","PARTIAL","PARTITION","PASCAL","PERCENT","PIVOT","PLAN","POSITION","PRAGMA","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRINT","PRIOR","PRIVILEGES","PROC","PROCEDURE","PUBLIC","QUERY","RAISE","RAISERROR","RANGE","READ","READTEXT","REAL","RECONFIGURE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELATIVE","RELEASE","RENAME","REPLACE","REPLICATION","RESTORE","RESTRICT","RETURN","RETURNING","REVERT","REVOKE","RIGHT","ROLLBACK","ROW","ROWCOUNT","ROWGUIDCOL","ROWS","RULE","SAVE","SAVEPOINT","SCHEMA","SCROLL","SECOND","SECTION","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION","SESSION_USER","SET","SETUSER","SHUTDOWN","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCA","SQLCODE","SQLERROR","SQLSTATE","SQLWARNING","STATISTICS","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLESAMPLE","TEMP","TEMPORARY","TEXTSIZE","THEN","TIES","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRAN","TRANSACTION","TRANSLATE","TRANSLATION","TRIGGER","TRIM","TRUE","TRUNCATE","TRY_CONVERT","TSEQUAL","UNBOUNDED","UNION","UNIQUE","UNKNOWN","UNPIVOT","UPDATE","UPDATETEXT","UPPER","USAGE","USE","USER","USING","VACUUM","VALUE","VALUES","VARCHAR","VARYING","VIEW","VIRTUAL","WAITFOR","WHEN","WHENEVER","WHERE","WHILE","WINDOW","WITH","WITHIN GROUP","WITHOUT","WORK","WRITE","WRITETEXT","YEAR","ZONE"],operators:["EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],logicalOperators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME"],comparisonOperators:["<>",">","<",">=","<=","=","!=","&","~","^","%"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@templateVariables"},{include:"@macros"},{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},{include:"@schemaTable"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$|<|>|=|!|%|&|+|\|-|*|/|~|^]+/,{cases:{"@operators":"operator","@comparisonOperators":"operator","@logicalOperators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}]],templateVariables:[[/\$[a-zA-Z0-9]+/,"variable"]],macros:[[/\$__[a-zA-Z0-9-_]+/,"type"]],schemaTable:[[/(\w+)\./,"identifier"],[/(\w+\.\w+)/,"identifier"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}},X=Object.freeze({__proto__:null,SELECT:N,FROM:I,WHERE:"where",GROUP:"group",ORDER:"order",BY:L,DESC:D,ASC:$,LIMIT:"limit",WITH:"with",AS:"as",SCHEMA:"schema",AND:"AND",OR:"OR",LOGICAL_OPERATORS:["AND","OR"],EQUALS:"=",NOT_EQUALS:"!=",COMPARISON_OPERATORS:M,STD_OPERATORS:Q,conf:F,language:B}),U=function(e){var n,r=function(e){var n=function(e){var n;return null!==(n=null==e?void 0:e.getPreviousOfType(t.iv.Keyword,N))&&void 0!==n?n:null}(e);return null==n?void 0:n.getNextOfType(t.iv.Keyword,I)}(e),i=null==r?void 0:r.getNextNonWhiteSpaceToken();return(null==i?void 0:i.isVariable())||(null==i?void 0:i.isKeyword())&&(null===(n=i.next)||void 0===n?void 0:n.is(t.iv.Parenthesis,"("))?null:i},G=function(e){var t=null==e?void 0:e.value.split(".");return 1===(null==t?void 0:t.length)?{table:t[0]}:2===(null==t?void 0:t.length)?{schema:t[0],table:t[1]}:null},Y={id:"editor.action.triggerSuggest",title:""},W=new Uint8Array(16);function j(){if(!_&&!("undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(W)}var K=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function V(e){return"string"==typeof e&&K.test(e)}for(var H=[],z=0;z<256;++z)H.push((z+256).toString(16).substr(1));function Z(e,t,n){var r=(e||{}).random||(e.rng||j)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(H[e[t+0]]+H[e[t+1]]+H[e[t+2]]+H[e[t+3]]+"-"+H[e[t+4]]+H[e[t+5]]+"-"+H[e[t+6]]+H[e[t+7]]+"-"+H[e[t+8]]+H[e[t+9]]+"-"+H[e[t+10]]+H[e[t+11]]+H[e[t+12]]+H[e[t+13]]+H[e[t+14]]+H[e[t+15]]).toLowerCase();if(!V(n))throw TypeError("Stringified UUID is invalid");return n}(r)}function J(e){return{label:e.name,insertText:"".concat("\\"+e.text).concat(ee(e.args)," "),insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,documentation:e.description,command:Y}}function ee(e){return e?"(".concat(e.map((function(e,t){return"${".concat(t,":").concat(e,"}")})).join(", ")).concat(")"):"()"}function te(){return[{id:t.fC.SelectKeyword,name:t.fC.SelectKeyword,resolve:function(e,n,r,i){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(t.iv.Keyword,N)||e.is(t.iv.Keyword,N)&&null===e.previous||i||e.isIdentifier()&&(i||null===(null==e?void 0:e.previous))||e.isIdentifier()&&N.startsWith(e.value.toLowerCase()))}},{id:t.fC.WithKeyword,name:t.fC.WithKeyword,resolve:function(e,n,r,i){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(t.iv.Keyword,"with")&&null===e.previous||e.isIdentifier()&&"with".toLowerCase().startsWith(e.value.toLowerCase()))}},{id:t.fC.AfterSelectKeyword,name:t.fC.AfterSelectKeyword,resolve:function(e,t,n,r){return Boolean((null==n?void 0:n.value.toLowerCase())===N)}},{id:t.fC.AfterSelectArguments,name:t.fC.AfterSelectArguments,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===N&&","===(null==n?void 0:n.value))}},{id:t.fC.AfterSelectFuncFirstArgument,name:t.fC.AfterSelectFuncFirstArgument,resolve:function(e,n,r,i){return Boolean(((null==n?void 0:n.value.toLowerCase())===N||"as"===(null==n?void 0:n.value.toLowerCase()))&&((null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterWhereFunctionArgument,name:t.fC.AfterWhereFunctionArgument,resolve:function(e,n,r,i){return Boolean((null==n?void 0:n.is(t.iv.Keyword,"where"))&&((null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterGroupBy,name:t.fC.AfterGroupBy,resolve:function(e,n,r,i){var o;return Boolean((null==n?void 0:n.is(t.iv.Keyword,L))&&(null===(o=null==n?void 0:n.getPreviousKeyword())||void 0===o?void 0:o.is(t.iv.Keyword,"group"))&&((null==r?void 0:r.isIdentifier())||(null==r?void 0:r.isDoubleQuotedString())||(null==r?void 0:r.is(t.iv.Parenthesis,")"))||(null==r?void 0:r.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.SelectAlias,name:t.fC.SelectAlias,resolve:function(e,t,n,r){return","===(null==n?void 0:n.value)&&"as"===(null==t?void 0:t.value.toLowerCase())}},{id:t.fC.FromKeyword,name:t.fC.FromKeyword,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===N&&","!==(null==n?void 0:n.value)||((null==e?void 0:e.isKeyword())||(null==e?void 0:e.isIdentifier()))&&I.toLowerCase().startsWith(e.value.toLowerCase()))}},{id:t.fC.AfterFromKeyword,name:t.fC.AfterFromKeyword,resolve:function(e,t,n,r){return Boolean(!(null==e?void 0:e.value.includes("."))&&(null==n?void 0:n.value.toLowerCase())===I)}},{id:t.fC.AfterSchema,name:t.fC.AfterSchema,resolve:function(e,t,n,r){return(null==e?void 0:e.isWhiteSpace())&&(null==e?void 0:e.next)&&(n=null==(e=null==e?void 0:e.previous)?void 0:e.getPreviousNonWhiteSpaceToken()),Boolean((null==e?void 0:e.isIdentifier())&&(null==e?void 0:e.value.endsWith("."))&&(null==n?void 0:n.value.toLowerCase())===I)}},{id:t.fC.AfterFrom,name:t.fC.AfterFrom,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===I&&(null==n?void 0:n.isDoubleQuotedString())||(null==t?void 0:t.value.toLowerCase())===I&&(null==n?void 0:n.isIdentifier())||(null==t?void 0:t.value.toLowerCase())===I&&(null==n?void 0:n.isVariable()))}},{id:t.fC.AfterTable,name:t.fC.AfterTable,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===I&&((null==n?void 0:n.isVariable())||""!==(null==n?void 0:n.value)&&(null==n?void 0:n.value.toLowerCase())!==I))}},{id:t.fC.WhereKeyword,name:t.fC.WhereKeyword,resolve:function(e,n,r,i){return Boolean("where"===(null==n?void 0:n.value.toLowerCase())&&((null==r?void 0:r.isKeyword())||(null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==r?void 0:r.is(t.iv.Operator,"AND"))))}},{id:t.fC.WhereComparisonOperator,name:t.fC.WhereComparisonOperator,resolve:function(e,n,r,i){return Boolean("where"===(null==n?void 0:n.value.toLowerCase())&&!(null==r?void 0:r.getPreviousNonWhiteSpaceToken().isOperator())&&!e.is(t.iv.Delimiter,".")&&!e.isParenthesis()&&((null==r?void 0:r.isIdentifier())||(null==r?void 0:r.isDoubleQuotedString())))}},{id:t.fC.WhereValue,name:t.fC.WhereValue,resolve:function(e,t,n,r){return Boolean("where"===(null==t?void 0:t.value.toLowerCase())&&(null==n?void 0:n.isOperator()))}},{id:t.fC.AfterWhereValue,name:t.fC.AfterWhereValue,resolve:function(e,n,r,i){var o,s,a;return Boolean("where"===(null==n?void 0:n.value.toLowerCase())&&(r.is(t.iv.Operator,"and")||r.is(t.iv.Operator,"or")||(null==r?void 0:r.isString())||(null==r?void 0:r.isNumber())||(null==r?void 0:r.is(t.iv.Parenthesis,")"))||(null==r?void 0:r.is(t.iv.Parenthesis,"()"))||(null==r?void 0:r.isTemplateVariable())||(null==r?void 0:r.is(t.iv.IdentifierQuote))&&(null===(o=r.getPreviousNonWhiteSpaceToken())||void 0===o?void 0:o.is(t.iv.Identifier))&&(null===(a=null===(s=null==r?void 0:r.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.getPreviousNonWhiteSpaceToken())||void 0===a?void 0:a.is(t.iv.IdentifierQuote))))}},{id:t.fC.AfterGroupByKeywords,name:t.fC.AfterGroupByKeywords,resolve:function(e,n,r,i){var o;return Boolean((null==n?void 0:n.is(t.iv.Keyword,L))&&(null===(o=null==n?void 0:n.getPreviousKeyword())||void 0===o?void 0:o.is(t.iv.Keyword,"group"))&&((null==r?void 0:r.is(t.iv.Keyword,L))||(null==r?void 0:r.is(t.iv.Delimiter,","))))}},{id:t.fC.AfterGroupByFunctionArgument,name:t.fC.AfterGroupByFunctionArgument,resolve:function(e,n,r,i){var o;return Boolean((null==n?void 0:n.is(t.iv.Keyword,L))&&(null===(o=null==n?void 0:n.getPreviousKeyword())||void 0===o?void 0:o.is(t.iv.Keyword,"group"))&&((null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterOrderByKeywords,name:t.fC.AfterOrderByKeywords,resolve:function(e,n,r,i){var o;return Boolean((null==r?void 0:r.is(t.iv.Keyword,L))&&(null===(o=null==r?void 0:r.getPreviousKeyword())||void 0===o?void 0:o.is(t.iv.Keyword,"order")))}},{id:t.fC.AfterOrderByFunction,name:t.fC.AfterOrderByFunction,resolve:function(e,n,r,i){var o,s;return Boolean((null==n?void 0:n.is(t.iv.Keyword,L))&&(null===(o=null==n?void 0:n.getPreviousKeyword())||void 0===o?void 0:o.is(t.iv.Keyword,"order"))&&(null==r?void 0:r.is(t.iv.Parenthesis))&&(null===(s=null==r?void 0:r.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.is(t.iv.Function)))}},{id:t.fC.AfterOrderByDirection,name:t.fC.AfterOrderByDirection,resolve:function(e,n,r,i){return Boolean((null==n?void 0:n.is(t.iv.Keyword,D))||(null==n?void 0:n.is(t.iv.Keyword,$)))}},{id:t.fC.AfterIsOperator,name:t.fC.AfterIsOperator,resolve:function(e,n,r,i){return Boolean(null==r?void 0:r.is(t.iv.Operator,"IS"))}},{id:t.fC.AfterIsNotOperator,name:t.fC.AfterIsNotOperator,resolve:function(e,n,r,i){var o;return Boolean((null==r?void 0:r.is(t.iv.Operator,"NOT"))&&(null===(o=r.getPreviousNonWhiteSpaceToken())||void 0===o?void 0:o.is(t.iv.Operator,"IS")))}}]}var ne={logger:function(){}},re=function(){};p.attachDebugger&&p.createLogger&&(ne=p.createLogger("SQLEditor"),re=ne.logger,p.attachDebugger("sqleditor",void 0,ne));var ie=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:["column"],type:t.mB.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:t.mB.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:t.mB.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:["column","'5m'"],type:t.mB.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:t.mB.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:t.mB.Column,description:"Will be replaced by the query column."}];function oe(e,n){var r,i,o,s={triggerCharacters:["."," ","$",",","(","'"]};(null==n?void 0:n.builtinFunctions.length)&&(s.supportedFunctions=function(){return n.builtinFunctions.map((function(e){return{id:e,name:e}}))});var a=[];return(null===(r=null==n?void 0:n.comparisonOperators)||void 0===r?void 0:r.length)&&a.push.apply(a,x([],q(n.comparisonOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:t.$M.Comparison}}))),!1)),n.logicalOperators=null!==(i=n.logicalOperators)&&void 0!==i?i:n.operators,(null===(o=null==n?void 0:n.logicalOperators)||void 0===o?void 0:o.length)&&a.push.apply(a,x([],q(n.logicalOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:t.$M.Logical}}))),!1)),s.supportedOperators=function(){return a},s.supportedMacros=function(){return ie},s}var se={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:function(){return Promise.resolve().then((function(){return X}))},completionProvider:oe},ae=new Map,le=new Map,ue=function(e,n,r){return E(void 0,void 0,void 0,(function(){var i,o,s,a,l,u,c,f;return w(this,(function(h){switch(h.label){case 0:return[4,(i=function(e,t){if("sql"!==(null==t?void 0:t.id)&&!t.loader){re("Loading language '".concat(null==t?void 0:t.id,"' from Monaco registry"),!1);var n=e.languages.getLanguages().find((function(e){return e.id===(null==t?void 0:t.id)}));if(!n)throw Error("Unknown Monaco language ".concat(null==t?void 0:t.id));return O(O({completionProvider:oe},n),t)}return O(O({},se),t)}(e,n)).loader(e)];case 1:return o=h.sent(),s=o.language,a=o.conf,e.languages.register({id:r}),e.languages.setMonarchTokensProvider(r,O({},s)),e.languages.setLanguageConfiguration(r,O({},a)),i.formatter&&e.languages.registerDocumentFormattingEditProvider(r,{provideDocumentFormattingEdits:function(e){var t=n.formatter(e.getValue());return[{range:e.getFullModelRange(),text:t}]}}),i.completionProvider&&(l=i.completionProvider(e,s),function(e,n,r){var i,o,s,a,l,u,c,f,h,p,d,g=this;ae.has(e)||function(e){ae.has(e)||ae.set(e,{functions:new y.Registry,operators:new y.Registry,suggestionKinds:new y.Registry(C),positionResolvers:new y.Registry(te),macros:new y.Registry}),ae.get(e)}(e);var v,b,S,R=ae.get(e);le.has(n)||le.set(n,new y.Registry((v=R.functions,b=R.operators,S=R.macros,function(){return[{id:t.is.SelectKeyword,name:t.is.SelectKeyword,suggestions:function(e,n){return Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:Y,sortText:t.G8.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:Y,sortText:t.G8.Medium}])}},{id:t.is.TemplateVariables,name:t.is.TemplateVariables,suggestions:function(e,n){var r=m.getTemplateSrv();return r?Promise.resolve(r.getVariables().map((function(e){var n="$".concat(e.name),i=r.replace(n);return{label:n,detail:"(Template Variable) ".concat(i),kind:t.cm.Snippet,documentation:"(Template Variable) ".concat(i),insertText:"\\$".concat(e.name," "),insertTextRules:t.a7.InsertAsSnippet,command:Y,sortText:t.G8.Low}}))):Promise.resolve([])}},{id:t.is.SelectMacro,name:t.is.SelectMacro,suggestions:function(e,n){return Promise.resolve(x([],q(S.list().filter((function(e){return e.type===t.mB.Value||e.type===t.mB.Column})).map(J)),!1))}},{id:t.is.TableMacro,name:t.is.TableMacro,suggestions:function(e,n){return Promise.resolve(x([],q(S.list().filter((function(e){return e.type===t.mB.Table})).map(J)),!1))}},{id:t.is.GroupMacro,name:t.is.GroupMacro,suggestions:function(e,n){return Promise.resolve(x([],q(S.list().filter((function(e){return e.type===t.mB.Group})).map(J)),!1))}},{id:t.is.FilterMacro,name:t.is.FilterMacro,suggestions:function(e,n){return Promise.resolve(x([],q(S.list().filter((function(e){return e.type===t.mB.Filter})).map(J)),!1))}},{id:t.is.WithKeyword,name:t.is.WithKeyword,suggestions:function(e,n){return Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:Y,sortText:t.G8.Medium}])}},{id:t.is.StarWildCard,name:t.is.StarWildCard,suggestions:function(e,n){return Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Field,command:Y,sortText:t.G8.High}])}},{id:t.is.FunctionsWithArguments,name:t.is.FunctionsWithArguments,suggestions:function(e,n){return Promise.resolve(x([],q(v.list().map((function(e){return{label:e.name,insertText:"".concat(e.name,"($0)"),documentation:e.description,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Function,command:Y,sortText:t.G8.MediumLow}}))),!1))}},{id:t.is.FunctionsWithoutArguments,name:t.is.FunctionsWithoutArguments,suggestions:function(e,n){return Promise.resolve(x([],q(v.list().map((function(e){return{label:e.name,insertText:"".concat(e.name,"()"),documentation:e.description,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Function,command:Y,sortText:t.G8.MediumHigh}}))),!1))}},{id:t.is.FromKeyword,name:t.is.FromKeyword,suggestions:function(e,n){return Promise.resolve([{label:"FROM",insertText:"FROM $0",command:Y,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Keyword}])}},{id:t.is.Schemas,name:t.is.Schemas,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.Tables,name:t.is.Tables,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.Columns,name:t.is.Columns,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.LogicalOperators,name:t.is.LogicalOperators,suggestions:function(e,n){return Promise.resolve(b.list().filter((function(e){return e.type===t.$M.Logical})).map((function(e){return{label:e.operator,insertText:"".concat(e.operator," "),documentation:e.description,command:Y,sortText:t.G8.MediumHigh,kind:t.cm.Operator}})))}},{id:t.is.WhereKeyword,name:t.is.WhereKeyword,suggestions:function(e,n){return Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:Y,sortText:t.G8.MediumHigh,kind:t.cm.Keyword}])}},{id:t.is.ComparisonOperators,name:t.is.ComparisonOperators,suggestions:function(e,n){return Promise.resolve(x(x([],q(b.list().filter((function(e){return e.type===t.$M.Comparison})).map((function(e){return{label:e.operator,insertText:"".concat(e.operator," "),documentation:e.description,command:Y,sortText:t.G8.MediumHigh,kind:t.cm.Operator}}))),!1),[{label:"IN (...)",insertText:"IN ( $0 )",command:Y,sortText:t.G8.Medium,kind:t.cm.Operator,insertTextRules:t.a7.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:Y,sortText:t.G8.Medium,kind:t.cm.Operator,insertTextRules:t.a7.InsertAsSnippet},{label:"IS",insertText:"IS",command:Y,sortText:t.G8.Medium,kind:t.cm.Operator},{label:"IS NOT",insertText:"IS NOT",command:Y,sortText:t.G8.Medium,kind:t.cm.Operator}],!1))}},{id:t.is.GroupByKeywords,name:t.is.GroupByKeywords,suggestions:function(e,n){return Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:Y,sortText:t.G8.MediumHigh,kind:t.cm.Keyword}])}},{id:t.is.OrderByKeywords,name:t.is.OrderByKeywords,suggestions:function(e,n){return Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:Y,sortText:t.G8.Medium,kind:t.cm.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:Y,sortText:t.G8.MediumLow,kind:t.cm.Snippet,insertTextRules:t.a7.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:Y,sortText:t.G8.MediumLow,kind:t.cm.Snippet,insertTextRules:t.a7.InsertAsSnippet}])}},{id:t.is.LimitKeyword,name:t.is.LimitKeyword,suggestions:function(e,n){return Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:Y,sortText:t.G8.MediumLow,kind:t.cm.Keyword}])}},{id:t.is.SortOrderDirectionKeyword,name:t.is.SortOrderDirectionKeyword,suggestions:function(e,n){return Promise.resolve([$,D].map((function(e){return{label:e,insertText:"".concat(e," "),command:Y,kind:t.cm.Keyword}})))}},{id:t.is.NotKeyword,name:t.is.NotKeyword,suggestions:function(){return Promise.resolve([{label:"NOT",insertText:"NOT",command:Y,kind:t.cm.Keyword,sortText:t.G8.High}])}},{id:t.is.BoolValues,name:t.is.BoolValues,suggestions:function(){return Promise.resolve(["TRUE","FALSE"].map((function(e){return{label:e,insertText:"".concat(e),command:Y,kind:t.cm.Keyword,sortText:t.G8.Medium}})))}},{id:t.is.NullValue,name:t.is.NullValue,suggestions:function(){return Promise.resolve(["NULL"].map((function(e){return{label:e,insertText:"".concat(e),command:Y,kind:t.cm.Keyword,sortText:t.G8.Low}})))}}]})));var A=le.get(n);if(r.supportedFunctions)try{for(var k=T(r.supportedFunctions()),P=k.next();!P.done;P=k.next()){var _=P.value;R.functions.getIfExists(_.id)||R.functions.register(_)}}catch(e){i={error:e}}finally{try{P&&!P.done&&(o=k.return)&&o.call(k)}finally{if(i)throw i.error}}if(r.supportedOperators)try{for(var N=T(r.supportedOperators()),I=N.next();!I.done;I=N.next()){var L=I.value;R.operators.getIfExists(L.id)||R.operators.register(O(O({},L),{name:L.id}))}}catch(e){s={error:e}}finally{try{I&&!I.done&&(a=N.return)&&a.call(N)}finally{if(s)throw s.error}}if(r.supportedMacros)try{for(var M=T(r.supportedMacros()),Q=M.next();!Q.done;Q=M.next()){var F=Q.value;R.macros.getIfExists(F.id)||R.macros.register(O(O({},F),{name:F.id}))}}catch(e){l={error:e}}finally{try{Q&&!Q.done&&(u=M.return)&&u.call(M)}finally{if(l)throw l.error}}if(r.customStatementPlacement){var B=function(e){var t=R.positionResolvers.getIfExists(e.id);if(t){var n=t.resolve;t.resolve=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.resolve.apply(e,x([],q(t),!1));if(e.overrideDefault)return i;var o=n.apply(void 0,x([],q(t),!1));return o||i}}else R.positionResolvers.register(O(O({},e),{id:e.id,name:e.id})),R.suggestionKinds.register({id:e.id,name:e.id,kind:[]})};try{for(var X=T(r.customStatementPlacement()),W=X.next();!W.done;W=X.next()){B(W.value)}}catch(e){c={error:e}}finally{try{W&&!W.done&&(f=X.return)&&f.call(X)}finally{if(c)throw c.error}}}if(r.customSuggestionKinds){var j=function(e){if(null===(d=e.applyTo)||void 0===d||d.forEach((function(t){var n=R.suggestionKinds.getIfExists(t);n&&-1===n.kind.indexOf(e.id)&&n.kind.push(e.id)})),e.overrideDefault){var t=A.get(e.id);if(void 0!==t)return t.suggestions=e.suggestionsResolver,"continue"}A.register({id:e.id,name:e.id,suggestions:e.suggestionsResolver})};try{for(var K=T(r.customSuggestionKinds()),V=K.next();!V.done;V=K.next()){j(V.value)}}catch(e){h={error:e}}finally{try{V&&!V.done&&(p=K.return)&&p.call(K)}finally{if(h)throw h.error}}}if(r.schemas){var H=(Z=A.get(t.is.Schemas)).suggestions;Z.suggestions=function(e,n){return E(g,void 0,void 0,(function(){var i,o,s;return w(this,(function(a){switch(a.label){case 0:return[4,H(e,n)];case 1:return i=a.sent(),[4,r.schemas.resolve()];case 2:return o=a.sent(),s=o.map((function(e){var n;return{label:e.name,insertText:"".concat(null!==(n=e.completion)&&void 0!==n?n:e.name,"."),command:Y,kind:t.cm.Module,sortText:t.G8.High}})),[2,x(x([],q(i),!1),q(s),!1)]}}))}))}}if(r.tables){var z=(Z=A.get(t.is.Tables)).suggestions;Z.suggestions=function(e,n){return E(g,void 0,void 0,(function(){var i,o,s,a,l,u,c;return w(this,(function(f){switch(f.label){case 0:return[4,z(e,n)];case 1:return i=f.sent(),o=U(e.currentToken),s=null!==(c=null===(u=r.tables)||void 0===u?void 0:u.parseName)&&void 0!==c?c:G,a=s(o),[4,r.tables.resolve(a)];case 2:return l=f.sent().map((function(e){var n;return{label:e.name,insertText:"".concat(null!==(n=e.completion)&&void 0!==n?n:e.name).concat(e.completion===e.name?" $0":""),insertTextRules:t.a7.InsertAsSnippet,command:Y,kind:t.cm.Field,sortText:t.G8.MediumHigh}})),[2,x(x([],q(i),!1),q(l),!1)]}}))}))}}if(r.columns){var Z,ee=(Z=A.get(t.is.Columns)).suggestions;Z.suggestions=function(e,n){return E(g,void 0,void 0,(function(){var i,o,s,a,l,u,c,f,h;return w(this,(function(p){switch(p.label){case 0:return[4,ee(e,n)];case 1:return i=p.sent(),o=U(e.currentToken),a=null!==(f=null===(c=r.tables)||void 0===c?void 0:c.parseName)&&void 0!==f?f:G,o&&o.value&&(s=a(o)),l=[],s?[4,null===(h=r.columns)||void 0===h?void 0:h.resolve(s)]:[3,3];case 2:u=p.sent(),l=u?u.map((function(e){var n;return{label:e.name,insertText:null!==(n=e.completion)&&void 0!==n?n:e.name,kind:t.cm.Field,sortText:t.G8.High,detail:e.type,documentation:e.description}})):[],p.label=3;case 3:return[2,x(x([],q(i),!1),q(l),!1)]}}))}))}}}(n.id,r,l),u=ae.get(n.id),c=le.get(r),f=function(t,n,i,o){return E(void 0,void 0,void 0,(function(){var i,o,s,a;return w(this,(function(l){switch(l.label){case 0:return i=P(e,t,n,r),o=S(i,u.positionResolvers),s=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=t.getIfExists(e[r]);i&&(n=n.concat(i.kind))}return n}(o,u.suggestionKinds),re("Statement position",!1,o),re("Suggestion kinds",!1,s),a={position:n,currentToken:i,statementPosition:o,kind:s,range:e.Range.fromPositions(n)},[4,R(e,i,s,a,c)];case 1:return[2,{suggestions:l.sent()}]}}))}))},e.languages.registerCompletionItemProvider(r,O(O({},l),{provideCompletionItems:f}))),[2]}}))}))},ce={testData:Object.freeze({__proto__:null,singleLineFullQuery:{query:'SELECT column1, FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"keyword.sql",language:"sql"},{offset:20,type:"white.sql",language:"sql"},{offset:21,type:"identifier.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"keyword.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"identifier.sql",language:"sql"},{offset:41,type:"white.sql",language:"sql"},{offset:42,type:"operator.sql",language:"sql"},{offset:43,type:"white.sql",language:"sql"},{offset:44,type:"identifier.quote.sql",language:"sql"},{offset:45,type:"identifier.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"},{offset:53,type:"keyword.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"keyword.sql",language:"sql"},{offset:61,type:"white.sql",language:"sql"},{offset:62,type:"identifier.sql",language:"sql"},{offset:69,type:"white.sql",language:"sql"},{offset:70,type:"keyword.sql",language:"sql"},{offset:75,type:"white.sql",language:"sql"},{offset:76,type:"keyword.sql",language:"sql"},{offset:78,type:"white.sql",language:"sql"},{offset:79,type:"identifier.sql",language:"sql"},{offset:86,type:"white.sql",language:"sql"},{offset:87,type:"keyword.sql",language:"sql"},{offset:91,type:"white.sql",language:"sql"},{offset:92,type:"keyword.sql",language:"sql"},{offset:97,type:"white.sql",language:"sql"},{offset:98,type:"number.sql",language:"sql"},{offset:100,type:"delimiter.sql",language:"sql"}]]},singleLineFullQueryWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"identifier.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"keyword.sql",language:"sql"},{offset:40,type:"white.sql",language:"sql"},{offset:41,type:"identifier.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"operator.sql",language:"sql"},{offset:50,type:"white.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"identifier.sql",language:"sql"},{offset:58,type:"identifier.quote.sql",language:"sql"},{offset:59,type:"white.sql",language:"sql"},{offset:60,type:"keyword.sql",language:"sql"},{offset:65,type:"white.sql",language:"sql"},{offset:66,type:"keyword.sql",language:"sql"},{offset:68,type:"white.sql",language:"sql"},{offset:69,type:"identifier.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"keyword.sql",language:"sql"},{offset:82,type:"white.sql",language:"sql"},{offset:83,type:"keyword.sql",language:"sql"},{offset:85,type:"white.sql",language:"sql"},{offset:86,type:"identifier.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"keyword.sql",language:"sql"},{offset:98,type:"white.sql",language:"sql"},{offset:99,type:"keyword.sql",language:"sql"},{offset:104,type:"white.sql",language:"sql"},{offset:105,type:"number.sql",language:"sql"},{offset:107,type:"delimiter.sql",language:"sql"}]]},multiLineFullQuery:{query:'SELECT column1,  \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1 DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"keyword.sql",language:"sql"},{offset:38,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]},multiLineFullQueryWithAggregation:{query:'SELECT count(column1),  \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1 DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"keyword.sql",language:"sql"},{offset:38,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]},singleLineEmptyQuery:{query:"",tokens:[]},singleLineTwoQueries:{query:'SELECT column1, FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT column2, FROM table2 WHERE column2 = "value2" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"keyword.sql",language:"sql"},{offset:20,type:"white.sql",language:"sql"},{offset:21,type:"identifier.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"keyword.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"identifier.sql",language:"sql"},{offset:41,type:"white.sql",language:"sql"},{offset:42,type:"operator.sql",language:"sql"},{offset:43,type:"white.sql",language:"sql"},{offset:44,type:"identifier.quote.sql",language:"sql"},{offset:45,type:"identifier.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"},{offset:53,type:"keyword.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"keyword.sql",language:"sql"},{offset:61,type:"white.sql",language:"sql"},{offset:62,type:"identifier.sql",language:"sql"},{offset:69,type:"white.sql",language:"sql"},{offset:70,type:"keyword.sql",language:"sql"},{offset:75,type:"white.sql",language:"sql"},{offset:76,type:"keyword.sql",language:"sql"},{offset:78,type:"white.sql",language:"sql"},{offset:79,type:"identifier.sql",language:"sql"},{offset:86,type:"white.sql",language:"sql"},{offset:87,type:"keyword.sql",language:"sql"},{offset:91,type:"white.sql",language:"sql"},{offset:92,type:"keyword.sql",language:"sql"},{offset:97,type:"white.sql",language:"sql"},{offset:98,type:"number.sql",language:"sql"},{offset:100,type:"delimiter.sql",language:"sql"},{offset:101,type:"white.sql",language:"sql"},{offset:102,type:"keyword.sql",language:"sql"},{offset:108,type:"white.sql",language:"sql"},{offset:109,type:"identifier.sql",language:"sql"},{offset:116,type:"delimiter.sql",language:"sql"},{offset:117,type:"white.sql",language:"sql"},{offset:118,type:"keyword.sql",language:"sql"},{offset:122,type:"white.sql",language:"sql"},{offset:123,type:"identifier.sql",language:"sql"},{offset:129,type:"white.sql",language:"sql"},{offset:130,type:"keyword.sql",language:"sql"},{offset:135,type:"white.sql",language:"sql"},{offset:136,type:"identifier.sql",language:"sql"},{offset:143,type:"white.sql",language:"sql"},{offset:144,type:"operator.sql",language:"sql"},{offset:145,type:"white.sql",language:"sql"},{offset:146,type:"identifier.quote.sql",language:"sql"},{offset:147,type:"identifier.sql",language:"sql"},{offset:153,type:"identifier.quote.sql",language:"sql"},{offset:154,type:"white.sql",language:"sql"},{offset:155,type:"keyword.sql",language:"sql"},{offset:160,type:"white.sql",language:"sql"},{offset:161,type:"keyword.sql",language:"sql"},{offset:163,type:"white.sql",language:"sql"},{offset:164,type:"identifier.sql",language:"sql"},{offset:171,type:"white.sql",language:"sql"},{offset:172,type:"keyword.sql",language:"sql"},{offset:177,type:"white.sql",language:"sql"},{offset:178,type:"keyword.sql",language:"sql"},{offset:180,type:"white.sql",language:"sql"},{offset:181,type:"identifier.sql",language:"sql"},{offset:188,type:"white.sql",language:"sql"},{offset:189,type:"keyword.sql",language:"sql"},{offset:193,type:"white.sql",language:"sql"},{offset:194,type:"keyword.sql",language:"sql"},{offset:199,type:"white.sql",language:"sql"},{offset:200,type:"number.sql",language:"sql"},{offset:202,type:"delimiter.sql",language:"sql"}]]},singleLineTwoQueriesWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT count(column2), FROM table2 WHERE column2 = "value2" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"identifier.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"keyword.sql",language:"sql"},{offset:40,type:"white.sql",language:"sql"},{offset:41,type:"identifier.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"operator.sql",language:"sql"},{offset:50,type:"white.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"identifier.sql",language:"sql"},{offset:58,type:"identifier.quote.sql",language:"sql"},{offset:59,type:"white.sql",language:"sql"},{offset:60,type:"keyword.sql",language:"sql"},{offset:65,type:"white.sql",language:"sql"},{offset:66,type:"keyword.sql",language:"sql"},{offset:68,type:"white.sql",language:"sql"},{offset:69,type:"identifier.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"keyword.sql",language:"sql"},{offset:82,type:"white.sql",language:"sql"},{offset:83,type:"keyword.sql",language:"sql"},{offset:85,type:"white.sql",language:"sql"},{offset:86,type:"identifier.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"keyword.sql",language:"sql"},{offset:98,type:"white.sql",language:"sql"},{offset:99,type:"keyword.sql",language:"sql"},{offset:104,type:"white.sql",language:"sql"},{offset:105,type:"number.sql",language:"sql"},{offset:107,type:"delimiter.sql",language:"sql"},{offset:108,type:"white.sql",language:"sql"},{offset:109,type:"keyword.sql",language:"sql"},{offset:115,type:"white.sql",language:"sql"},{offset:116,type:"predefined.sql",language:"sql"},{offset:121,type:"delimiter.parenthesis.sql",language:"sql"},{offset:122,type:"identifier.sql",language:"sql"},{offset:129,type:"delimiter.parenthesis.sql",language:"sql"},{offset:130,type:"delimiter.sql",language:"sql"},{offset:131,type:"white.sql",language:"sql"},{offset:132,type:"keyword.sql",language:"sql"},{offset:136,type:"white.sql",language:"sql"},{offset:137,type:"identifier.sql",language:"sql"},{offset:143,type:"white.sql",language:"sql"},{offset:144,type:"keyword.sql",language:"sql"},{offset:149,type:"white.sql",language:"sql"},{offset:150,type:"identifier.sql",language:"sql"},{offset:157,type:"white.sql",language:"sql"},{offset:158,type:"operator.sql",language:"sql"},{offset:159,type:"white.sql",language:"sql"},{offset:160,type:"identifier.quote.sql",language:"sql"},{offset:161,type:"identifier.sql",language:"sql"},{offset:167,type:"identifier.quote.sql",language:"sql"},{offset:168,type:"white.sql",language:"sql"},{offset:169,type:"keyword.sql",language:"sql"},{offset:174,type:"white.sql",language:"sql"},{offset:175,type:"keyword.sql",language:"sql"},{offset:177,type:"white.sql",language:"sql"},{offset:178,type:"identifier.sql",language:"sql"},{offset:185,type:"white.sql",language:"sql"},{offset:186,type:"keyword.sql",language:"sql"},{offset:191,type:"white.sql",language:"sql"},{offset:192,type:"keyword.sql",language:"sql"},{offset:194,type:"white.sql",language:"sql"},{offset:195,type:"identifier.sql",language:"sql"},{offset:202,type:"white.sql",language:"sql"},{offset:203,type:"keyword.sql",language:"sql"},{offset:207,type:"white.sql",language:"sql"},{offset:208,type:"keyword.sql",language:"sql"},{offset:213,type:"white.sql",language:"sql"},{offset:214,type:"number.sql",language:"sql"},{offset:216,type:"delimiter.sql",language:"sql"}]]},singleLineMultipleColumns:{query:'SELECT count(column1), column2 FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1, avg(column2) DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"identifier.sql",language:"sql"},{offset:30,type:"white.sql",language:"sql"},{offset:31,type:"keyword.sql",language:"sql"},{offset:35,type:"white.sql",language:"sql"},{offset:36,type:"identifier.sql",language:"sql"},{offset:42,type:"white.sql",language:"sql"},{offset:43,type:"keyword.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"identifier.sql",language:"sql"},{offset:56,type:"white.sql",language:"sql"},{offset:57,type:"operator.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"identifier.quote.sql",language:"sql"},{offset:60,type:"identifier.sql",language:"sql"},{offset:66,type:"identifier.quote.sql",language:"sql"},{offset:67,type:"white.sql",language:"sql"},{offset:68,type:"keyword.sql",language:"sql"},{offset:73,type:"white.sql",language:"sql"},{offset:74,type:"keyword.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"identifier.sql",language:"sql"},{offset:84,type:"white.sql",language:"sql"},{offset:85,type:"keyword.sql",language:"sql"},{offset:90,type:"white.sql",language:"sql"},{offset:91,type:"keyword.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"identifier.sql",language:"sql"},{offset:101,type:"delimiter.sql",language:"sql"},{offset:102,type:"white.sql",language:"sql"},{offset:103,type:"predefined.sql",language:"sql"},{offset:106,type:"delimiter.parenthesis.sql",language:"sql"},{offset:107,type:"identifier.sql",language:"sql"},{offset:114,type:"delimiter.parenthesis.sql",language:"sql"},{offset:115,type:"white.sql",language:"sql"},{offset:116,type:"keyword.sql",language:"sql"},{offset:120,type:"white.sql",language:"sql"},{offset:121,type:"keyword.sql",language:"sql"},{offset:126,type:"white.sql",language:"sql"},{offset:127,type:"number.sql",language:"sql"},{offset:129,type:"delimiter.sql",language:"sql"}]]},multiLineMultipleColumns:{query:'SELECT count(column1), column2 \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1, avg(column2) DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"identifier.sql",language:"sql"},{offset:30,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"delimiter.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"predefined.sql",language:"sql"},{offset:38,type:"delimiter.parenthesis.sql",language:"sql"},{offset:39,type:"identifier.sql",language:"sql"},{offset:46,type:"delimiter.parenthesis.sql",language:"sql"},{offset:47,type:"white.sql",language:"sql"},{offset:48,type:"keyword.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]}}),testStatementPosition:function(e,t,n){describe("".concat(e),(function(){var r,i;beforeEach((function(){var e=new Map;t.forEach((function(t){return e.set(t.query.query,t.query.tokens)})),r=function(e){return{editor:{tokenize:function(t,n){return e.get(t)}},Range:{containsPosition:function(e,t){return t.lineNumber>=e.startLineNumber&&t.lineNumber<=e.endLineNumber&&t.column>=e.startColumn&&t.column<=e.endColumn}},languages:{CompletionItemKind:{Snippet:2,Function:1,Keyword:3},CompletionItemInsertTextRule:{InsertAsSnippet:2}}}}(e),i=new y.Registry((function(){return n().map((function(e){return{id:e.id,name:e.name||e.id,resolve:e.resolve}}))}))})),t.forEach((function(t){test("".concat(t.query.query),(function(){!function(e,t,n,r,i){var o,s=S(P(r,(o=e,{getValue:function(e,t){return o},getValueInRange:function(e,t){return o.split("\n")[e.startLineNumber-1].trim().slice(0===e.startColumn?0:e.startColumn-1,e.endColumn-1)},getLineLength:function(e){return o.split("\n")[e-1].trim().length}}),t),i);expect(s).toContain(n)}(t.query.query,{lineNumber:t.position.line,column:t.position.column},e,r,i)}))}))}))}},fe=function(e){return{button:v.css({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)})}},he=function(e){var t=e.children,n=b(e,["children"]),r=p.useStyles2(d.useCallback((function(e){return pe(e,n)}),[n]));return g.createElement("div",{className:r.root},t)},pe=function(e,t){var n,r,i;return{root:v.css({display:"flex",flexDirection:null!==(n=t.direction)&&void 0!==n?n:"row",flexWrap:null===(r=t.wrap)||void 0===r||r?"wrap":void 0,alignItems:t.alignItems,gap:e.spacing(null!==(i=t.gap)&&void 0!==i?i:2),flexGrow:t.flexGrow})}},de=function(e){return{root:v.css({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.spacing(3),minHeight:e.spacing(4)})}},ge=function(e){var t=p.useStyles2(d.useCallback((function(t){return ye(t,e)}),[e]));return g.createElement("span",{className:v.cx(t.wrapper)})};ge.defaultProps={v:0,h:0,layout:"block"};var ye=function(e,t){var n,r;return{wrapper:v.css([{paddingRight:e.spacing(null!==(n=t.h)&&void 0!==n?n:0),paddingBottom:e.spacing(null!==(r=t.v)&&void 0!==r?r:0)},"inline"===t.layout&&{display:"inline-block"},"block"===t.layout&&{display:"block"}])}},me=function(e){return{root:v.css({padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.borderRadius(1)})}},ve=g.forwardRef((function(e,t){var n=e.items,r=e.renderItem,i=e.onChange;return g.createElement(he,null,n.map((function(e,t){return g.createElement("div",{key:t},r(e,(function(e){return function(e,t){var r=x([],q(n),!1);r[e]=t,i(r)}(t,e)}),(function(){return e=t,(r=x([],q(n),!1)).splice(e,1),void i(r);var e,r})))})),g.createElement(p.Button,{ref:t,onClick:function(){var e=x(x([],q(n),!1),[{}],!1);i(e)},variant:"secondary",size:"md",icon:"plus","aria-label":"Add",type:"button"}))})),Oe=function(e){var t=e.children,n=p.useStyles2(Ee);return g.createElement(p.SelectContainer,O({},e,{className:v.cx(e.className,n.container)}),t)},be=function(e){var t=e.className,n=e.children,r=p.useStyles2(Ee);return g.createElement("div",{className:v.cx(t,r.valueContainer)},n)},Ee=function(e){return{root:v.css({display:"flex",fontSize:12,alignItems:"center"}),label:v.css({color:e.colors.text.secondary,whiteSpace:"nowrap"}),container:v.css({background:"none",borderColor:"transparent"}),valueContainer:v.css({display:"flex",alignItems:"center",flex:"initial",color:e.colors.text.secondary,fontSize:12})}},we=["","base","hovered","invalid","focused"],Te=function(){return{root:v.css({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:we.indexOf("base"),"&:hover":{zIndex:we.indexOf("hovered")},"&:focus-within":{zIndex:we.indexOf("focused")}}}),invalidChild:v.css({zIndex:we.indexOf("invalid")})}};t.Stack=he},e=>{"use strict";e.exports=o},e=>{"use strict";e.exports=r},e=>{"use strict";e.exports=n},t=>{"use strict";t.exports=e},e=>{"use strict";e.exports=t},e=>{"use strict";e.exports=i},,(e,t,n)=>{"use strict";e.exports=n(0)}],a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{"use strict";l.r(u),l.d(u,{plugin:()=>cr});var e=l(5),t=l(3);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(){r=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),a=new R(r||[]);return o(s,"_invoke",{value:T(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function d(){}function g(){}function y(){}var m={};c(m,a,(function(){return this}));var v=Object.getPrototypeOf,O=v&&v(v(C([])));O&&O!==t&&i.call(O,a)&&(m=O);var b=y.prototype=d.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,s,a,l){var u=h(e[o],e,s);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,l)}))}l(u.arg)}var s;o(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return s=s?s.then(i,i):i()}})}function T(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=q(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function q(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,q(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return g.prototype=y,o(b,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:g,configurable:!0}),g.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(w.prototype),c(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new w(f(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(b),c(b,u,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,l,"next",e)}function l(e){i(s,r,o,a,l,"throw",e)}a(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(w,e);var n,i,l,u,f,p,g,y,m,v,O,b,E=c(w);function w(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),d(h(t=E.call(this,e)),"result",void 0),d(h(t),"url",void 0),t.result=null,t}return n=w,i=[{key:"nodeQuery",value:function(e,t){return this.getChildPaths(e)}},{key:"getChildPaths",value:(b=o(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/ds/query",n));case 1:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)})},{key:"createAlert",value:function(e,t){return this.createAlertFun(e,t)}},{key:"createAlertFun",value:(O=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/createAlert"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)})},{key:"removeAlert",value:function(e,t){return this.removeAlertFun(e,t)}},{key:"removeAlertFun",value:(v=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/removeAlert"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)})},{key:"realtimeTaskSave",value:function(e,t){return this.realtimeTaskSaveFun(e,t)}},{key:"realtimeTaskSaveFun",value:(m=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/realtimeTaskSave"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)})},{key:"realtimeTaskRemove",value:function(e,t){return this.realtimeTaskRemoveFun(e,t)}},{key:"realtimeTaskRemoveFun",value:(y=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/realtimeTaskRemove"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)})},{key:"algorithmList",value:function(e,t){return this.algorithmListFun(e,t)}},{key:"algorithmListFun",value:(g=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/algorithmList"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return g.apply(this,arguments)})},{key:"getMetrics",value:function(e,t){return this.getMetricsFun(e,t)}},{key:"getMetricsFun",value:(p=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/metrics"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},{key:"getLabelNames",value:function(e,t){return this.getLabelNamesFun(e,t)}},{key:"getLabelNamesFun",value:(f=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/labelNames"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"getSeries",value:function(e,t){return this.getSeriesFun(e,t)}},{key:"getSeriesFun",value:(u=o(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,t.getBackendSrv)().post("/api/datasources/".concat(i.id,"/resources/series"),n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})}],i&&s(n.prototype,i),l&&s(n,l),Object.defineProperty(n,"prototype",{writable:!1}),w}(t.DataSourceWithBackend),y=l(1),m=l.n(y),v=l(2);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=v.LegacyForms.SecretFormField,k=v.LegacyForms.FormField,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(o,e);var t,n,r,i=q(o);function o(){var e;E(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(S(e=i.call.apply(i,[this].concat(n))),"onPathChange",(function(t){var n=e.props,r=n.onOptionsChange,i=n.options,o=b({},i.jsonData,{path:t.target.value});r(b({},i,{jsonData:o}))})),C(S(e),"onManagerUrlChange",(function(t){var n=e.props,r=n.onOptionsChange,i=n.options,o=b({},i.jsonData,{managerUrl:t.target.value});r(b({},i,{jsonData:o}))})),C(S(e),"onTokenChange",(function(t){var n=e.props,r=n.onOptionsChange,i=n.options,o=b({},i.jsonData,{token:t.target.value});r(b({},i,{jsonData:o}))})),C(S(e),"onURLChange",(function(t){var n=e.props;(0,n.onOptionsChange)(b({},n.options,{url:t.target.value}))})),C(S(e),"onAPIKeyChange",(function(t){var n=e.props;(0,n.onOptionsChange)(b({},n.options,{secureJsonData:{apiKey:t.target.value}}))})),C(S(e),"onResetAPIKey",(function(){var t=e.props,n=t.onOptionsChange,r=t.options;n(b({},r,{secureJsonFields:b({},r.secureJsonFields,{apiKey:!1}),secureJsonData:b({},r.secureJsonData,{apiKey:""})}))})),e}return t=o,(n=[{key:"render",value:function(){var e=this.props.options,t=e.jsonData,n=e.secureJsonFields,r=e.url,i=e.secureJsonData||{};return m().createElement("div",{className:"gf-form-group"},m().createElement("div",{className:"gf-form"},m().createElement(k,{label:"URL",labelWidth:6,inputWidth:20,onChange:this.onURLChange,value:r||"",placeholder:"URL"})),m().createElement("div",{className:"gf-form"},m().createElement(k,{label:"managerUrl",labelWidth:6,inputWidth:20,onChange:this.onManagerUrlChange,value:t.managerUrl||"",placeholder:"managerUrl"})),m().createElement("div",{className:"gf-form"},m().createElement(k,{label:"Path",labelWidth:6,inputWidth:20,onChange:this.onPathChange,value:t.path||"",placeholder:"json field returned to frontend"})),m().createElement("div",{className:"gf-form-inline"},m().createElement("div",{className:"gf-form"},m().createElement(A,{isConfigured:n&&n.apiKey,value:i.apiKey||"",label:"API Key",placeholder:"secure json field (backend only)",labelWidth:6,inputWidth:20,onReset:this.onResetAPIKey,onChange:this.onAPIKeyChange}))),m().createElement("div",{className:"gf-form"},m().createElement(k,{label:"token",labelWidth:6,inputWidth:20,onChange:this.onTokenChange,value:t.token||"",placeholder:"token"})))}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(y.PureComponent),_=l(6),N={expr:"",genericId:"-1",queryType:"syncPreview",algorithmList:!1,A_Realtime_Save:"",alertTemplateId:1,alertEnable:!1,alertTitle:"1",taskId:"",series:""},I=l(4),L=l(8),D=["label"];function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}function M(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Q(e){var t=e.label,n=M(e,D),r=t.replace(" ","-"),i=(0,y.useRef)((0,_.uniqueId)("switch-".concat(r))),o=(0,v.useStyles2)(F);return m().createElement(L.Stack,{gap:1},m().createElement("label",{htmlFor:i.current,className:o.switchLabel},t),m().createElement(v.Switch,$({},n,{id:i.current})))}var F=function(e){return{switchLabel:(0,I.css)({color:e.colors.text.secondary,cursor:"pointer",fontSize:e.typography.bodySmall.fontSize,"&:hover":{color:e.colors.text.primary}})}},B=[].concat([{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate -quantile (0    1) over dimensions"}],[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],[{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile( float, b instant-vector)",documentation:"Calculates the -quantile (0    1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The -quantile (0    1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."}]);B.map((function(e){return e.label})),new RegExp("\\b(?:".concat(B.map((function(e){return e.label})).join("|"),")(?=\\s*\\()"),"i"),new RegExp("/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:".concat(["by","group_left","group_right","ignoring","on","offset","without"].join("|"),")\\b"),"i");function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function U(){U=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),a=new x(i||[]);return r(s,"_invoke",{value:E(e,n,a)}),s}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function p(){}function d(){}var g={};l(g,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==t&&n.call(m,o)&&(g=m);var v=d.prototype=h.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,s,a){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==X(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,a)}),(function(e){i("throw",e,s,a)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return i("throw",e,s,a)}))}a(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},O(b.prototype),l(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},O(v),l(v,a,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(q),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;q(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function G(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){W(o,r,i,s,a,"next",e)}function a(e){W(o,r,i,s,a,"throw",e)}s(void 0)}))}}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){var t="function"==typeof Map?new Map:void 0;return H=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return z(e,arguments,ee(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),J(r,e)},H(e)}function z(e,t,n){return z=Z()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&J(i,n.prototype),i},z.apply(null,arguments)}function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(a,e);var t,n,r,i,o,s=(t=a,n=Z(),function(){var e,r=ee(t);if(n){var i=ee(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return V(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,"should never happen")}return r=a,i&&K(r.prototype,i),o&&K(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(H(Error));function ne(e){return re.apply(this,arguments)}function re(){return(re=j(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllMetricNames();case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return{type:"METRIC_NAME",label:e.name,insertText:e.name,detail:"".concat(e.name," : ").concat(e.type),documentation:e.help}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=B.map((function(e){var t;return{type:"FUNCTION",label:e.label,insertText:null!==(t=e.insertText)&&void 0!==t?t:"",detail:e.detail,documentation:e.documentation}}));function oe(e){return se.apply(this,arguments)}function se(){return(se=j(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return n=e.sent,e.abrupt("return",[].concat(G(ie),G(n)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=["$__interval","$__range","$__rate_interval","1m","5m","10m","30m","1h","1d"].map((function(e){return{type:"DURATION",label:e,insertText:e}}));function le(e){return ue.apply(this,arguments)}function ue(){return(ue=j(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getHistory();case 2:return n=e.sent,e.abrupt("return",n.slice(0,10).map((function(e){return{type:"HISTORY",label:e,insertText:e}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){var n=G(t);void 0!==e&&n.push({name:"__name__",value:e,op:"="});var r=n.map((function(e){return"".concat(e.name).concat(e.op,'"').concat(e.value.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"'),'"')}));return"{".concat(r.join(","),"}")}function fe(e,t,n){return he.apply(this,arguments)}function he(){return(he=j(U().mark((function e(t,n,r){var i,o,s,a;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t||0!==n.length){e.next=4;break}return e.abrupt("return",r.getAllLabelNames());case 4:return i=ce(t,n),e.next=7,r.getSeries(i);case 7:return o=e.sent,s=Object.keys(o),a=new Set(n.map((function(e){return e.name}))),e.abrupt("return",s.filter((function(e){return!a.has(e)})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,n,r,i){return de.apply(this,arguments)}function de(){return(de=j(U().mark((function e(t,n,r,i,o){var s;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t,i,o);case 2:return s=e.sent,e.abrupt("return",s.map((function(e){return{type:"LABEL_NAME",label:e,insertText:"".concat(e).concat(n),triggerOnInsert:r}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t,n){return ye.apply(this,arguments)}function ye(){return(ye=j(U().mark((function e(t,n,r){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe(t,"=",!0,n,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n){return ve.apply(this,arguments)}function ve(){return(ve=j(U().mark((function e(t,n,r){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe(t,"",!1,n,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t,n,r){return be.apply(this,arguments)}function be(){return(be=j(U().mark((function e(t,n,r,i){var o,s,a;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t||0!==r.length){e.next=4;break}return e.abrupt("return",i.getLabelValues(n));case 4:return s=ce(t,r),e.next=7,i.getSeries(s);case 7:return a=e.sent,e.abrupt("return",null!==(o=a[n])&&void 0!==o?o:[]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t,n,r,i){return we.apply(this,arguments)}function we(){return(we=j(U().mark((function e(t,n,r,i,o){var s;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(t,n,i,o);case 2:return s=e.sent,e.abrupt("return",s.map((function(e){return{type:"LABEL_VALUE",label:e,insertText:r?e:'"'.concat(e,'"')}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=j(U().mark((function e(t,n){var r,i;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="IN_DURATION"===e.t0?3:"IN_FUNCTION"===e.t0?4:"AT_ROOT"===e.t0?5:"EMPTY"===e.t0?6:"IN_LABEL_SELECTOR_NO_LABEL_NAME"===e.t0?13:"IN_GROUPING"===e.t0?14:"IN_LABEL_SELECTOR_WITH_LABEL_NAME"===e.t0?15:16;break;case 3:return e.abrupt("return",ae);case 4:case 5:return e.abrupt("return",oe(n));case 6:return e.next=8,ne(n);case 8:return r=e.sent,e.next=11,le(n);case 11:return i=e.sent,e.abrupt("return",[].concat(G(i),G(ie),G(r)));case 13:return e.abrupt("return",ge(t.metricName,t.otherLabels,n));case 14:return e.abrupt("return",me(t.metricName,t.otherLabels,n));case 15:return e.abrupt("return",Ee(t.metricName,t.labelName,t.betweenQuotes,t.otherLabels,n));case 16:throw new te(t);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const qe=1024;let xe=0;class Se{constructor(e,t){this.from=e,this.to=t}}class Re{constructor(e={}){this.id=xe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Ae.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}Re.closedBy=new Re({deserialize:e=>e.split(" ")}),Re.openedBy=new Re({deserialize:e=>e.split(" ")}),Re.group=new Re({deserialize:e=>e.split(" ")}),Re.contextHash=new Re({perNode:!0}),Re.lookAhead=new Re({perNode:!0}),Re.mounted=new Re({perNode:!0});const Ce=Object.create(null);class Ae{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Ce,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Ae(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Re.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(Re.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}Ae.none=new Ae("",Object.create(null),0,8);class ke{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new Ae(n.name,r,n.id,n.flags):n)}return new ke(t)}}const Pe=new WeakMap,_e=new WeakMap;var Ne;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Ne||(Ne={}));class Ie{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(Re.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ye(this.topNode,e)}cursorAt(e,t=0,n=0){let r=Pe.get(this)||this.topNode,i=new Ye(r);return i.moveTo(e,t),Pe.set(this,i._tree),i}get topNode(){return new Fe(this,0,0,null)}resolve(e,t=0){let n=Qe(Pe.get(this)||this.topNode,e,t,!1);return Pe.set(this,n),n}resolveInner(e,t=0){let n=Qe(_e.get(this)||this.topNode,e,t,!0);return _e.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let o=this.cursor((e.mode||0)|Ne.IncludeAnonymous);;){let e=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==t(o))){if(o.firstChild())continue;e=!0}for(;e&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ve(Ae.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new Ie(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new Ie(Ae.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=qe,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new Le(n,n.length):n,l=r.types,u=0,c=0;function f(e,t,n,m,v){let{id:O,start:b,end:E,size:w}=a,T=c;for(;w<0;){if(a.next(),-1==w){let t=o[O];return n.push(t),void m.push(b-e)}if(-3==w)return void(u=O);if(-4==w)return void(c=O);throw new RangeError(`Unrecognized record size: ${w}`)}let q,x,S=l[O],R=b-e;if(E-b<=i&&(x=g(a.pos-t,v))){let t=new Uint16Array(x.size-x.skip),n=a.pos-x.size,i=t.length;for(;a.pos>n;)i=y(x.start,t,i);q=new De(t,E-x.start,r),R=x.start-e}else{let e=a.pos-w;a.next();let t=[],n=[],r=O>=s?O:-1,o=0,l=E;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(p(t,n,b,o,a.end,l,r,T),o=t.length,l=a.end),a.next()):f(b,e,t,n,r);if(r>=0&&o>0&&o<t.length&&p(t,n,b,o,b,l,r,T),t.reverse(),n.reverse(),r>-1&&o>0){let e=h(S);q=Ve(S,t,n,0,t.length,0,E-b,e,e)}else q=d(S,t,n,E-b,T-E)}n.push(q),m.push(R)}function h(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof Ie){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(Re.lookAhead))&&(s=n[a]+i.length+o)}return d(e,t,n,r,s)}}function p(e,t,n,i,o,s,a,l){let u=[],c=[];for(;e.length>i;)u.push(e.pop()),c.push(t.pop()+n-o);e.push(d(r.types[a],u,c,s-o,l-s)),t.push(o-n)}function d(e,t,n,r,i=0,o){if(u){let e=[Re.contextHash,u];o=o?[e].concat(o):[e]}if(i>25){let e=[Re.lookAhead,i];o=o?[e].concat(o):[e]}return new Ie(e,t,n,r,o)}function g(e,t){let n=a.fork(),r=0,o=0,l=0,u=n.end-i,c={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){c.size=r,c.start=o,c.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<u)break;let f=n.id>=s?4:0,h=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;f+=4}else n.id>=s&&(f+=4);n.next()}o=h,r+=e,l+=f}return(t<0||r==e)&&(c.size=r,c.start=o,c.skip=l),c.size>4?c:void 0}function y(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=y(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?u=r:-4==l&&(c=r);return n}let m=[],v=[];for(;a.pos>0;)f(e.start||0,e.bufferStart||0,m,v,-1);let O=null!==(t=e.length)&&void 0!==t?t:m.length?v[0]+m[0].length:0;return new Ie(l[e.topID],m.reverse(),v.reverse(),O)}(e)}}Ie.empty=new Ie(Ae.none,[],[],0);class Le{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Le(this.buffer,this.index)}}class De{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Ae.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!($e(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=r[s++],i[a++]=r[s++]-n;let t=i[a++]=r[s++]-n;i[a++]=r[s++]-e,o=Math.max(o,t)}return new De(i,o,this.set)}}function $e(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function Me(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function Qe(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof Fe&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:Ne.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;r=s,s=r.parent)r instanceof Fe&&r.index<0&&(null===(i=s.enter(t,n,o))||void 0===i?void 0:i.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class Fe{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],u=a[e]+o.from;if($e(r,n,u,u+l.length))if(l instanceof De){if(i&Ne.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-u,r);if(s>-1)return new Ge(new Ue(o,l,e,u),null,s)}else if(i&Ne.IncludeAnonymous||!l.type.isAnonymous||We(l)){let s;if(!(i&Ne.IgnoreMounts)&&l.props&&(s=l.prop(Re.mounted))&&!s.overlay)return new Fe(s.tree,u,e,o);let a=new Fe(l,u,e,o);return i&Ne.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&Ne.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&Ne.IgnoreOverlays)&&(r=this._tree.prop(Re.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new Fe(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Ye(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Qe(this,e,t,!1)}resolveInner(e,t=0){return Qe(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Me(this,e)}getChild(e,t=null,n=null){let r=Be(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Be(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Xe(this,e)}}function Be(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function Xe(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class Ue{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Ge{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Ge(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Ne.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Ge(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ge(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ge(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Ye(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new Ie(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Qe(this,e,t,!1)}resolveInner(e,t=0){return Qe(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Me(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=Be(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Be(this,e,t,n)}get node(){return this}matchContext(e){return Xe(this,e)}}class Ye{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fe)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Fe?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&Ne.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ne.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ne.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&Ne.IncludeAnonymous||e instanceof De||!e.type.isAnonymous||We(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new Ge(this.buffer,t,this.stack[e]);return this.bufferNode=new Ge(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Xe(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return Xe(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function We(e){return e.children.some((e=>e instanceof De||!e.type.isAnonymous||We(e)))}const je=new WeakMap;function Ke(e,t){if(!e.isAnonymous||t instanceof De||t.type!=e)return 1;let n=je.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Ie)){n=1;break}n+=Ke(e,r)}je.set(t,n)}return n}function Ve(e,t,n,r,i,o,s,a,l){let u=0;for(let n=r;n<i;n++)u+=Ke(e,t[n]);let c=Math.ceil(1.5*u/8),f=[],h=[];return function t(n,r,i,s,a){for(let u=i;u<s;){let i=u,p=r[u],d=Ke(e,n[u]);for(u++;u<s;u++){let t=Ke(e,n[u]);if(d+t>=c)break;d+=t}if(u==i+1){if(d>c){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}f.push(n[i])}else{let t=r[u-1]+n[u-1].length-p;f.push(Ve(e,n,r,i,u,p,t,null,l))}h.push(p+a-o)}}(t,n,r,i,0),(a||l)(f,h,s)}class He{startParse(e,t,n){return"string"==typeof e&&(e=new ze(e)),n=n?n.length?n.map((e=>new Se(e.from,e.to))):[new Se(0,0)]:[new Se(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class ze{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Re({perNode:!0});class Ze{constructor(e,t,n,r,i,o,s,a,l,u=0,c){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=u,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new Ze(e,[],t,n,n,0,[],0,r?new Je(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=65535&e,{parser:i}=this.p,o=i.dynamicPrecedence(r);if(o&&(this.score+=o),0==n)return this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),void this.reduceContext(r,this.reducePos);let s=this.stack.length-3*(n-1)-(262144&e?6:0),a=s?this.stack[s-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let u=s?this.stack[s-1]:0,c=this.bufferBase+this.buffer.length-u;if(r<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,e,c+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=i.getGoto(e,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Ze(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new tt(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(0==(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Je(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Je{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var et;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth",e[e.MinBigReduction=2e3]="MinBigReduction"}(et||(et={}));class tt{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class nt{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new nt(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new nt(this.stack,this.pos,this.index)}}function rt(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}class it{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ot=new it;class st{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ot,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=ot,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class at{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;lt(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}at.prototype.contextual=at.prototype.fallback=at.prototype.extend=!1;at.prototype.fallback=at.prototype.extend=!1;function lt(e,t,n,r,i,o){let s=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;0!=(a&e[s]);){let n=e[s+1];for(let r=s+3;r<n;r+=2)if((e[r+1]&a)>0){let n=e[r];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||ct(n,t.token.value,i,o))){t.acceptToken(n);break}}let r=t.next,u=0,c=e[s+2];if(!(t.next<0&&c>u&&65535==e[n+3*c-3]&&65535==e[n+3*c-3])){for(;u<c;){let i=u+c>>1,o=n+i+(i<<1),a=e[o],l=e[o+1]||65536;if(r<a)c=i;else{if(!(r>=l)){s=e[o+2],t.advance();continue e}u=i+1}}break}s=e[n+3*c-1]}}function ut(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}function ct(e,t,n,r){let i=ut(n,r,t);return i<0||ut(n,r,e)<i}const ft="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let ht=null;var pt,dt;function gt(e,t,n){let r=e.cursor(Ne.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(pt||(pt={}));class yt{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?gt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?gt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof Ie){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(Re.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class mt{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new it))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],u=this.tokens[r];if((!n||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=o||u.context!=s)&&(this.updateCachedToken(u,l,e),u.mask=o,u.context=s),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),0!=u.value)){let r=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(n=u,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new it,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new it,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(i,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(wt(s,a+2),t,n,r));break}a=wt(s,a+2)}s[a]==t&&(r=this.putAction(wt(s,a+1),t,n,r))}return r}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo",e[e.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",e[e.MaxStackCount=12]="MaxStackCount"}(dt||(dt={}));class vt{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new st(t,r),this.tokens=new mt(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[Ze.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new yt(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1){e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this;ft&&this.stackID(e);if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(r);o;){let r=this.parser.nodeSet.types[o.type.id]==o.type?i.getGoto(e.state,o.type.id):-1;if(r>-1&&o.length&&(!t||(o.prop(Re.contextHash)||0)==n))return e.useNode(o,r),!0;if(!(o instanceof Ie)||0==o.children.length||o.positions[0]>0)break;let s=o.children[0];if(!(s instanceof Ie&&0==o.positions[0]))break;o=s}}let o=i.stateSlot(e.state,4);if(o>0)return e.reduce(o),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let i=0;i<s.length;){let o=s[i++],a=s[i++],l=s[i++],u=i==s.length||!n,c=u?e:e.split();if(c.apply(o,a,l),u)return!0;c.pos>r?t.push(c):n.push(c)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return Ot(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],u=ft?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),this.advanceFully(s,n))continue}let c=s.split(),f=u;for(let e=0;c.forceReduce()&&e<10;e++){if(this.advanceFully(c,n))break;ft&&(f=this.stackID(c)+" -> ")}for(let e of s.recoverByInsert(a))this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),Ot(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),Ie.build({buffer:nt.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ht||(ht=new WeakMap)).get(e);return t||ht.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Ot(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class bt{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}class Et extends He{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=Re[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let s=-r;s>0;s--)i(t[n++],e,o);n++}}}this.nodeSet=new ke(t.map(((t,i)=>Ae.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=qe;let o=rt(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(Tt),this.states=rt(e.states,Uint32Array),this.data=rt(e.stateData),this.goto=rt(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new at(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new vt(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return wt(n,o+2);break}i=n[o=wt(n,o+2)]}if(i==t||0==i)return wt(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=wt(this.data,n+2)}if(t==wt(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=wt(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(Et.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,r)=>{let i=e.specializers.find((e=>e.from==n.external));if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return t.specializers[r]=Tt(o),o}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new bt(e,n,r)}static deserialize(e){return new Et(e)}}function wt(e,t){return e[t]|e[t+1]<<16}function Tt(e){if(e.external){let t=e.extend?1:0;return(n,r)=>e.external(n,r)<<1|t}return e.get}let qt=0;class xt{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=qt++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new xt([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Rt;return t=>t.modified.indexOf(e)>-1?t:Rt.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let St=0;class Rt{constructor(){this.instances=[],this.id=St++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every(((e,t)=>e==i[t])));var r,i}));if(n)return n;let r=[],i=new xt(r,e,t);for(let e of t)e.instances.push(i);let o=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of o)r.push(Rt.get(t,e));return i}}const Ct=new Re;class At{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}At.empty=new At([],2,null);const kt=xt.define,Pt=kt(),_t=kt(),Nt=kt(_t),It=kt(_t),Lt=kt(),Dt=kt(Lt),$t=kt(Lt),Mt=kt(),Qt=kt(Mt),Ft=kt(),Bt=kt(),Xt=kt(),Ut=kt(Xt),Gt=kt(),Yt={comment:Pt,lineComment:kt(Pt),blockComment:kt(Pt),docComment:kt(Pt),name:_t,variableName:kt(_t),typeName:Nt,tagName:kt(Nt),propertyName:It,attributeName:kt(It),className:kt(_t),labelName:kt(_t),namespace:kt(_t),macroName:kt(_t),literal:Lt,string:Dt,docString:kt(Dt),character:kt(Dt),attributeValue:kt(Dt),number:$t,integer:kt($t),float:kt($t),bool:kt(Lt),regexp:kt(Lt),escape:kt(Lt),color:kt(Lt),url:kt(Lt),keyword:Ft,self:kt(Ft),null:kt(Ft),atom:kt(Ft),unit:kt(Ft),modifier:kt(Ft),operatorKeyword:kt(Ft),controlKeyword:kt(Ft),definitionKeyword:kt(Ft),moduleKeyword:kt(Ft),operator:Bt,derefOperator:kt(Bt),arithmeticOperator:kt(Bt),logicOperator:kt(Bt),bitwiseOperator:kt(Bt),compareOperator:kt(Bt),updateOperator:kt(Bt),definitionOperator:kt(Bt),typeOperator:kt(Bt),controlOperator:kt(Bt),punctuation:Xt,separator:kt(Xt),bracket:Ut,angleBracket:kt(Ut),squareBracket:kt(Ut),paren:kt(Ut),brace:kt(Ut),content:Mt,heading:Qt,heading1:kt(Qt),heading2:kt(Qt),heading3:kt(Qt),heading4:kt(Qt),heading5:kt(Qt),heading6:kt(Qt),contentSeparator:kt(Mt),list:kt(Mt),quote:kt(Mt),emphasis:kt(Mt),strong:kt(Mt),link:kt(Mt),monospace:kt(Mt),strikethrough:kt(Mt),inserted:kt(),deleted:kt(),changed:kt(),invalid:kt(),meta:Gt,documentMeta:kt(Gt),annotation:kt(Gt),processingInstruction:kt(Gt),definition:xt.defineModifier(),constant:xt.defineModifier(),function:xt.defineModifier(),standard:xt.defineModifier(),local:xt.defineModifier(),special:xt.defineModifier()},Wt=(function(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{}}([{tag:Yt.link,class:"tok-link"},{tag:Yt.heading,class:"tok-heading"},{tag:Yt.emphasis,class:"tok-emphasis"},{tag:Yt.strong,class:"tok-strong"},{tag:Yt.keyword,class:"tok-keyword"},{tag:Yt.atom,class:"tok-atom"},{tag:Yt.bool,class:"tok-bool"},{tag:Yt.url,class:"tok-url"},{tag:Yt.labelName,class:"tok-labelName"},{tag:Yt.inserted,class:"tok-inserted"},{tag:Yt.deleted,class:"tok-deleted"},{tag:Yt.literal,class:"tok-literal"},{tag:Yt.string,class:"tok-string"},{tag:Yt.number,class:"tok-number"},{tag:[Yt.regexp,Yt.escape,Yt.special(Yt.string)],class:"tok-string2"},{tag:Yt.variableName,class:"tok-variableName"},{tag:Yt.local(Yt.variableName),class:"tok-variableName tok-local"},{tag:Yt.definition(Yt.variableName),class:"tok-variableName tok-definition"},{tag:Yt.special(Yt.variableName),class:"tok-variableName2"},{tag:Yt.definition(Yt.propertyName),class:"tok-propertyName tok-definition"},{tag:Yt.typeName,class:"tok-typeName"},{tag:Yt.namespace,class:"tok-namespace"},{tag:Yt.className,class:"tok-className"},{tag:Yt.macroName,class:"tok-macroName"},{tag:Yt.propertyName,class:"tok-propertyName"},{tag:Yt.operator,class:"tok-operator"},{tag:Yt.comment,class:"tok-comment"},{tag:Yt.meta,class:"tok-meta"},{tag:Yt.invalid,class:"tok-invalid"},{tag:Yt.punctuation,class:"tok-punctuation"}]),{inf:147,nan:148,bool:1,ignoring:2,on:3,group_left:4,group_right:5,offset:6}),jt={avg:8,atan2:7,bottomk:9,count:10,count_values:11,group:12,max:13,min:14,quantile:15,stddev:16,stdvar:17,sum:18,topk:19,by:20,without:21,and:22,or:23,unless:24,start:25,end:26},Kt=function(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new At(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return Ct.add(t)}({LineComment:Yt.comment,LabelName:Yt.labelName,StringLiteral:Yt.string,NumberLiteral:Yt.number,Duration:Yt.number,"Abs Absent AbsentOverTime Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Time Timestamp Vector Year":Yt.function(Yt.variableName),"Avg Bottomk Count Count_values Group Max Min Quantile Stddev Stdvar Sum Topk":Yt.operatorKeyword,"By Without Bool On Ignoring GroupLeft GroupRight Offset Start End":Yt.modifier,"And Unless Or":Yt.logicOperator,"Sub Add Mul Mod Div Atan2 Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow At":Yt.operator,UnaryOp:Yt.arithmeticOperator,"( )":Yt.paren,"[ ]":Yt.squareBracket,"{ }":Yt.brace,"":Yt.invalid}),Vt={__proto__:null,absent_over_time:309,absent:311,abs:313,acos:315,acosh:317,asin:319,asinh:321,atan:323,atanh:325,avg_over_time:327,ceil:329,changes:331,clamp:333,clamp_max:335,clamp_min:337,cos:339,cosh:341,count_over_time:343,days_in_month:345,day_of_month:347,day_of_week:349,day_of_year:351,deg:353,delta:355,deriv:357,exp:359,floor:361,histogram_quantile:363,holt_winters:365,hour:367,idelta:369,increase:371,irate:373,label_replace:375,label_join:377,last_over_time:379,ln:381,log10:383,log2:385,max_over_time:387,min_over_time:389,minute:391,month:393,pi:395,predict_linear:397,present_over_time:399,quantile_over_time:401,rad:403,rate:405,resets:407,round:409,scalar:411,sgn:413,sin:415,sinh:417,sort:419,sort_desc:421,sqrt:423,stddev_over_time:425,stdvar_over_time:427,sum_over_time:429,tan:431,tanh:433,timestamp:435,time:437,vector:439,year:441},Ht=Et.deserialize({version:14,states:"6bOYQPOOO'OQPOOOOQO'#C{'#C{O'TQPO'#CzQ'`QQOOOOQO'#De'#DeO'ZQPO'#DdOOQO'#FO'#FOO(mQPO'#FUOYQPO'#FQOYQPO'#FTOOQO'#FW'#FWO.lQSO'#FXO.tQQO'#FVOOQO'#FV'#FVOOQO'#Cy'#CyOOQO'#Df'#DfOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{QOQPOOO0_QPO'#C|O0dQPO'#DRO'ZQPO,59fO0kQQO,59fO2XQPO,59oO2XQPO,59oO2XQPO,59oO2XQPO,59oO2XQPO,59oO8WQQO,5;hO8]QQO,5;kO8eQPO,5;zOOQO,5:O,5:OOOQO,5;j,5;jO8|QQO,5;lO9TQQO,5;oO:kQPO'#FZO:yQPO,5;sOOQO'#FY'#FYOOQO,5;s,5;sOOQO,5;q,5;qO;RQSO'#C}OOQO,59h,59hO;ZQPO,59mO;cQQO'#DSOOQO,59m,59mOOQO1G/Q1G/QO0_QPO'#DWOAcQPO'#DVOAmQPO'#DVOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOAwQSO1G1SOOQO1G1V1G1VOBPQQO1G1VOBUQPO'#FOOOQO'#Fb'#FbOOQO1G1f1G1fOBaQPO1G1fOOQO1G1W1G1WOOQO'#F['#F[OBfQPO,5;uOBkQSO1G1_OOQO1G1_1G1_OOQO'#DP'#DPOBsQPO,59iOOQO'#DO'#DOOOQO,59i,59iOYQPO,59nOOQO1G/X1G/XOOQO,59r,59rOHnQPO,59qOHuQPO,59qOJ^QQO7+$uOJnQQO7+$uOLSQQO7+$uOLjQQO7+$uONRQQO7+$uOOQO7+&n7+&nONlQQO7+&tOOQO7+&q7+&qONtQPO7+'QOOQO1G1a1G1aOOQO1G1`1G1`OOQO7+&y7+&yONyQSO1G/TOOQO1G/T1G/TO! RQQO1G/YOOQO1G/]1G/]O! ]QPO1G/]OOQO<<J`<<J`O!'RQPO<<J`OOQO<<Jl<<JlOOQO1G/U1G/UOOQO7+$o7+$oOOQO7+$w7+$wOOQOAN?zAN?z",stateData:"!'W~O$[OSkOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQO!ZZO#u_O$XVO$YVO$]XO$``O$aaO$bbO$ccO$ddO$eeO$ffO$ggO$hhO$iiO$jjO$kkO$llO$mmO$nnO$ooO$ppO$qqO$rrO$ssO$ttO$uuO$vvO$wwO$xxO$yyO$zzO${{O$||O$}}O%O!OO%P!PO%Q!QO%R!RO%S!SO%T!TO%U!UO%V!VO%W!WO%X!XO%Y!YO%Z!ZO%[![O%]!]O%^!^O%_!_O%`!`O%a!aO%b!bO%c!cO%d!dO%e!eO%f!fO%g!gO%h!hO%i!iO%j!jO%k!kO%l!lO%m!mO%n!nO%o!oO%p!pO%q!qO%r!rO%s!sO%t!tO%wWO%xWO%yVO%{[O~O!ZZO~Od!vOe!vO$]!wO~OU#QOV!zOf!}Og#OOh!}Ox!zO{!zO|!zO}!zO!O!{O!P!{O!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O$T#RO%u#PO~O$X#TO$Y#TO%y#TOW#xXX#xXY#xXZ#xX[#xX]#xX^#xX_#xX`#xXa#xXb#xXc#xX!Z#xX#u#xX$X#xX$Y#xX$]#xX$`#xX$a#xX$b#xX$c#xX$d#xX$e#xX$f#xX$g#xX$h#xX$i#xX$j#xX$k#xX$l#xX$m#xX$n#xX$o#xX$p#xX$q#xX$r#xX$s#xX$t#xX$u#xX$v#xX$w#xX$x#xX$y#xX$z#xX${#xX$|#xX$}#xX%O#xX%P#xX%Q#xX%R#xX%S#xX%T#xX%U#xX%V#xX%W#xX%X#xX%Y#xX%Z#xX%[#xX%]#xX%^#xX%_#xX%`#xX%a#xX%b#xX%c#xX%d#xX%e#xX%f#xX%g#xX%h#xX%i#xX%j#xX%k#xX%l#xX%m#xX%n#xX%o#xX%p#xX%q#xX%r#xX%s#xX%t#xX%w#xX%x#xX%y#xX%{#xX~Ot#WO%|#ZO~O%{[OU#yXV#yXf#yXg#yXh#yXx#yX{#yX|#yX}#yX!O#yX!P#yX!Q#yX!R#yX!S#yX!T#yX!U#yX!V#yX$T#yX$W#yX%u#yX$_#yX$^#yX~O$]#]O~O$_#aO~PYOd!vOe!vOUnaVnafnagnahnaxna{na|na}na!Ona!Pna!Qna!Rna!Sna!Tna!Una!Vna$Tna$Wna%una$_na$^na~OP#eOQ#cOR#cOWyPXyPYyPZyP[yP]yP^yP_yP`yPayPbyPcyP!ZyP#uyP$XyP$YyP$]yP$`yP$ayP$byP$cyP$dyP$eyP$fyP$gyP$hyP$iyP$jyP$kyP$lyP$myP$nyP$oyP$pyP$qyP$ryP$syP$tyP$uyP$vyP$wyP$xyP$yyP$zyP${yP$|yP$}yP%OyP%PyP%QyP%RyP%SyP%TyP%UyP%VyP%WyP%XyP%YyP%ZyP%[yP%]yP%^yP%_yP%`yP%ayP%byP%cyP%dyP%eyP%fyP%gyP%hyP%iyP%jyP%kyP%lyP%myP%nyP%oyP%pyP%qyP%ryP%syP%tyP%wyP%xyP%yyP%{yP~O#q#kO~O!P#mO#q#lO~Oi#oOj#oO$XVO$YVO%w#nO%x#nO%yVO~O$_#rO~P'`Ox!zOU#waV#waf#wag#wah#wa{#wa|#wa}#wa!O#wa!P#wa!Q#wa!R#wa!S#wa!T#wa!U#wa!V#wa$T#wa$W#wa%u#wa$_#wa$^#wa~O!V#sO$P#sO$Q#sO$R#sO~O$^#uO%|#vO~Ot#wO$_#zO~O$^#{O$_#|O~O$^vX$_vX~P'`OWyXXyXYyXZyX[yX]yX^yX_yX`yXayXbyXcyX!ZyX#uyX$XyX$YyX$]yX$`yX$ayX$byX$cyX$dyX$eyX$fyX$gyX$hyX$iyX$jyX$kyX$lyX$myX$nyX$oyX$pyX$qyX$ryX$syX$tyX$uyX$vyX$wyX$xyX$yyX$zyX${yX$|yX$}yX%OyX%PyX%QyX%RyX%SyX%TyX%UyX%VyX%WyX%XyX%YyX%ZyX%[yX%]yX%^yX%_yX%`yX%ayX%byX%cyX%dyX%eyX%fyX%gyX%hyX%iyX%jyX%kyX%lyX%myX%nyX%oyX%pyX%qyX%ryX%syX%tyX%wyX%xyX%yyX%{yX~OS$OOT$OO~P;mOQ#cOR#cO~P;mO%v$VO%z$WO~O#q$XO~O$X#TO$Y#TO%y#TO~O$]$YO~O#u$ZO~Ot#WO%|$]O~O$^$^O$_$_O~OWyaXyaYyaZya[ya]ya^ya_ya`yaayabyacya!Zya#uya$Xya$Yya$`ya$aya$bya$cya$dya$eya$fya$gya$hya$iya$jya$kya$lya$mya$nya$oya$pya$qya$rya$sya$tya$uya$vya$wya$xya$yya$zya${ya$|ya$}ya%Oya%Pya%Qya%Rya%Sya%Tya%Uya%Vya%Wya%Xya%Yya%Zya%[ya%]ya%^ya%_ya%`ya%aya%bya%cya%dya%eya%fya%gya%hya%iya%jya%kya%lya%mya%nya%oya%pya%qya%rya%sya%tya%wya%xya%yya%{ya~O$]#]O~PB{OS$bOT$bO$]ya~PB{Ox!zOUwqfwqgwqhwq!Owq!Pwq!Qwq!Rwq!Swq!Twq!Uwq!Vwq$Twq$Wwq%uwq$_wq$^wq~OVwq{wq|wq}wq~PISOV!zO{!zO|!zO}!zO~PISOV!zOx!zO{!zO|!zO}!zO!O!{O!P!{OUwqfwqgwqhwq$Twq$Wwq%uwq$_wq$^wq~O!Qwq!Rwq!Swq!Twq!Uwq!Vwq~PKOO!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O~PKOOV!zOf!}Oh!}Ox!zO{!zO|!zO}!zO!O!{O!P!{O!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O~OUwqgwq$Twq$Wwq%uwq$_wq$^wq~PMQO#q$dO%v$cO~O$_$eO~Ot#wO$_$gO~O$^vi$_vi~P'`O$]#]OWyiXyiYyiZyi[yi]yi^yi_yi`yiayibyicyi!Zyi#uyi$Xyi$Yyi$`yi$ayi$byi$cyi$dyi$eyi$fyi$gyi$hyi$iyi$jyi$kyi$lyi$myi$nyi$oyi$pyi$qyi$ryi$syi$tyi$uyi$vyi$wyi$xyi$yyi$zyi${yi$|yi$}yi%Oyi%Pyi%Qyi%Ryi%Syi%Tyi%Uyi%Vyi%Wyi%Xyi%Yyi%Zyi%[yi%]yi%^yi%_yi%`yi%ayi%byi%cyi%dyi%eyi%fyi%gyi%hyi%iyi%jyi%kyi%lyi%myi%nyi%oyi%pyi%qyi%ryi%syi%tyi%wyi%xyi%yyi%{yi~O%v$iO~O",goto:"(v$VPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$W$v%S%`%f%r%uP%{&U$vP&X&hPPPPPPPPPPP$v&r'OP'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O$vP'[$v$vP$v$v'k$v'w(W(g(j(pPPP$vP(sQSOQ#UXQ#VYQ#`!wQ$Q#fQ$R#gQ$S#hQ$T#iQ$U#jR$`#{e_OXY!w#f#g#h#i#j#{eROXY!w#f#g#h#i#j#{Q!xRR#b!yQ#^!vQ#}#cQ$a$OR$h$bR#x#]Q#y#]R$f$^Q!yRQ#SUR#b!xR#_!wQ#f!zQ#g!{Q#h!|Q#i!}R#j#OY#d!z!{!|!}#OR$P#eeUOXY!w#f#g#h#i#j#{eTOXY!w#f#g#h#i#j#{d_OXY!w#f#g#h#i#j#{R#p#ReYOXY!w#f#g#h#i#j#{d]OXY!w#f#g#h#i#j#{R!uPd^OXY!w#f#g#h#i#j#{R#[]R#X[Q#Y[R$[#uR#t#WR#q#R",nodeNames:" Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifiers OnOrIgnoring Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName",maxTerm:228,propSources:[Kt],skippedNodes:[0,27],repeatNodeCount:0,tokenData:"1R~RwX^#lpq#lqr$ars$tst%huv%swx%xxy&gyz&lz{&q{|&v|}&}}!O'S!O!P'Z!P!Q(Z!Q!R(`!R![)W![!]-r!^!_.n!_!`.{!`!a/b!b!c/o!c!}/t!}#O0[#P#Q0a#Q#R0f#R#S/t#S#T0k#T#o/t#o#p0w#q#r0|#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$[~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!V~~$tO$R~~$yU#u~OY$tZr$trs%]s#O$t#O#P%b#P~$t~%bO#u~~%ePO~$t~%mQk~OY%hZ~%h~%xO}~~%}U#u~OY%xZw%xwx%]x#O%x#O#P&a#P~%x~&dPO~%x~&lO$]~~&qO$_~~&vO{~R&}O%xP!OQ~'SO$^~R'ZO%wP!PQP'^P!Q!['aP'fR%yP!Q!['a!g!h'o#X#Y'oP'rR{|'{}!O'{!Q![(RP(OP!Q![(RP(WP%yP!Q![(R~(`O|~R(eZ%yP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#l#m-W#m#n,iR)]Y%yP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#m#n,iQ*QP#qQ!Q![*TQ*WS!Q![*T#[#]*d#a#b*x#g#h+lQ*iP#qQ!Q![*lQ*oR!Q![*l#a#b*x#g#h+lQ*}Q#qQ!Q![+T#g#h+gQ+WR!Q![+T#a#b+a#g#h+lQ+dP#g#h+gQ+lO#qQQ+qP#qQ!Q![+tQ+wQ!Q![+t#a#b+aQ,SP#qQ!Q![,VQ,YT!Q![,V#W#X){#[#]*d#a#b*x#g#h+lQ,nP#qQ!Q![,qQ,tU!Q![,q#W#X){#[#]*d#a#b*x#g#h+l#k#l+}P-ZR!Q![-d!c!i-d#T#Z-dP-iR%yP!Q![-d!c!i-d#T#Z-dV-yT%zS!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.YR._T!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.Y~.sP!U~!_!`.v~.{O!T~~/QQ$PP!_!`/W#r#s/]Q/]O!QQ~/bO$Q~~/gP!S~!_!`/j~/oO!R~~/tO$T~V/{T!ZRtS!Q![/t![!].Y!c!}/t#R#S/t#T#o/t~0aO%u~~0fO%v~~0kOx~~0nRO#S0k#S#T%]#T~0k~0|O%{~~1RO%|~",tokenizers:[0,1,2],topRules:{PromQL:[0,28],MetricName:[1,145]},specialized:[{term:57,get:(e,t)=>((e,t)=>Wt[e.toLowerCase()]||-1)(e)<<1},{term:57,get:(e,t)=>((e,t)=>jt[e.toLowerCase()]||-1)(e)<<1|1},{term:57,get:e=>Vt[e]||-1}],tokenPrec:0}),zt=136,Zt=137;function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||nn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function nn(e,t){if(e){if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function an(e){var t="function"==typeof Map?new Map:void 0;return an=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ln(e,arguments,fn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),cn(r,e)},an(e)}function ln(e,t,n){return ln=un()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&cn(i,n.prototype),i},ln.apply(null,arguments)}function un(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function cn(e,t){return cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cn(e,t)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cn(e,t)}(a,e);var t,n,r,i,o,s=(t=a,n=un(),function(){var e,r=fn(t);if(n){var i=fn(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return sn(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,"should never happen")}return r=a,i&&on(r.prototype,i),o&&on(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(an(Error));function pn(e,t){switch(t){case"parent":return e.parent;case"firstChild":return e.firstChild;case"lastChild":return e.lastChild;case"nextSibling":return e.nextSibling;default:throw new hn(t)}}function dn(e,t){var n,r=e,i=tn(t);try{for(i.s();!(n=i.n()).done;){var o=en(n.value,2),s=o[0],a=o[1];if(null===(r=pn(r,s)))return null;if(r.type.id!==a)return null}}catch(e){i.e(e)}finally{i.f()}return r}function gn(e,t){return t.slice(e.from,e.to)}function yn(e,t){return e.every((function(e,n){return e===t[n]}))}var mn=[{path:[135,133],fun:function(e,t,n){if(function(e){return null!==En(e,0)}(e))return null;var r=dn(e,[["firstChild",zt]]);if(null!==r){if(!t.slice(r.to,n).includes(","))return null}var i=dn(e,[["parent",133],["firstChild",134],["firstChild",57]]),o=bn(e,t);if(null===i)return{type:"IN_LABEL_SELECTOR_NO_LABEL_NAME",otherLabels:o};return{type:"IN_LABEL_SELECTOR_NO_LABEL_NAME",metricName:gn(i,t),otherLabels:o}}},{path:[28],fun:function(e,t,n){return{type:"AT_ROOT"}}},{path:[37],fun:function(e,t,n){return{type:"IN_FUNCTION"}}},{path:[129,Zt],fun:wn},{path:[0,Zt],fun:wn},{path:[0,124],fun:function(e,t,n){return{type:"IN_DURATION"}}},{path:[33],fun:function(e,t,n){var r=dn(e,[["parent",32],["parent",30]]);if(null===r)return null;var i=r.getChild(37);if(null===i)return null;var o=En(i,134);if(null===o)return null;var s=dn(o,[["firstChild",57]]);if(null===s)return null;return{type:"IN_GROUPING",metricName:gn(s,t),otherLabels:[]}}}],vn=new Map([[139,"="],[140,"=~"],[53,"!="],[141,"!~"]]);function On(e,t){if(e.type.id!==Zt)return null;var n=dn(e,[["firstChild",36]]);if(null===n)return null;var r=dn(n,[["nextSibling",138]]);if(null===r)return null;var i=function(e){var t,n=e.firstChild;return null===n?null:null!==(t=vn.get(n.type.id))&&void 0!==t?t:null}(r);if(null===i)return null;var o=dn(e,[["lastChild",129]]);if(null===o)return null;var s=gn(n,t),a=function(e){var t=e.slice(1,e.length-1);if(e.startsWith('"')&&e.endsWith('"'))return t.replace(/\\"/,'"');if(e.startsWith("'")&&e.endsWith("'"))return t.replace(/\\'/,"'");if(e.startsWith("`")&&e.endsWith("`"))return t;throw new Error("FIXME: invalid string literal")}(gn(o,t));return{name:s,value:a,op:i}}function bn(e,t){if(135!==e.type.id)return[];for(var n=dn(e,[["firstChild",zt]]),r=[];null!==n;){var i=dn(n,[["lastChild",Zt]]);if(null===i)return[];var o=On(i,t);null!==o&&r.push(o),n=dn(n,[["firstChild",zt]])}return r.reverse(),r}function En(e,t){if(e.type.id===t)return e;var n,r=function(e){for(var t=e.firstChild,n=[];null!==t;)n.push(t),t=t.nextSibling;return n}(e),i=tn(r);try{for(i.s();!(n=i.n()).done;){var o=En(n.value,t);if(null!==o)return o}}catch(e){i.e(e)}finally{i.f()}return null}function wn(e,t,n){var r=!e.type.isError,i=dn(e,[["parent",Zt]]);if(null===i)return null;var o=dn(i,[["firstChild",36]]);if(null===o)return null;var s=gn(o,t),a=dn(i,[["parent",zt]]);if(null===a)return null;for(var l=a,u=null;null===u;){var c=l.parent;if(null===c)return null;switch(c.type.id){case zt:l=c;continue;case 135:u=c;continue;default:return null}}var f=bn(u,t).filter((function(e){return e.name!==s})),h=dn(u,[["parent",133],["firstChild",134],["firstChild",57]]);return null===h?{type:"IN_LABEL_SELECTOR_WITH_LABEL_NAME",labelName:s,betweenQuotes:r,otherLabels:f}:{type:"IN_LABEL_SELECTOR_WITH_LABEL_NAME",metricName:gn(h,t),labelName:s,betweenQuotes:r,otherLabels:f}}function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Sn(e){var t="function"==typeof Map?new Map:void 0;return Sn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Rn(e,arguments,kn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),An(r,e)},Sn(e)}function Rn(e,t,n){return Rn=Cn()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&An(i,n.prototype),i},Rn.apply(null,arguments)}function Cn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function An(e,t){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},An(e,t)}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}var Pn,_n,Nn,In,Ln,Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}(a,e);var t,n,r,i,o,s=(t=a,n=Cn(),function(){var e,r=kn(t);if(n){var i=kn(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return xn(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,"should never happen")}return r=a,i&&qn(r.prototype,i),o&&qn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(Sn(Error));function $n(e,t){switch(e){case"DURATION":return t.languages.CompletionItemKind.Unit;case"FUNCTION":return t.languages.CompletionItemKind.Variable;case"HISTORY":return t.languages.CompletionItemKind.Snippet;case"LABEL_NAME":return t.languages.CompletionItemKind.Enum;case"LABEL_VALUE":return t.languages.CompletionItemKind.EnumMember;case"METRIC_NAME":return t.languages.CompletionItemKind.Constructor;default:throw new Dn(e)}}function Mn(e,t){return{triggerCharacters:["{",",","[","(","=","~"," ",'"'],provideCompletionItems:function(n,r){var i=n.getWordAtPosition(r),o=null!=i?e.Range.lift({startLineNumber:r.lineNumber,endLineNumber:r.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn}):e.Range.fromPositions(r),s={column:r.column,lineNumber:r.lineNumber},a=n.getOffsetAt(s),l=function(e,t){if(""===e)return{type:"EMPTY"};for(var n=Ht.parse(e),r=function(e,t){for(var n=e.cursorAt(t);;){if(n.from===t&&n.to===t){var r=n.node;if(r.type.isError)return r}if(!n.next())break}return null}(n,t),i=null!=r?r.cursor():n.cursorAt(t),o=i.node,s=[i.type.id];i.parent();)s.push(i.type.id);var a,l=tn(mn);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(yn(u.path,s))return u.fun(o,e,t)}}catch(e){l.e(e)}finally{l.f()}return null}(n.getValue(),a),u=null!=l?function(e,t){return Te.apply(this,arguments)}(l,t):Promise.resolve([]);return u.then((function(t){var n=t.length.toString().length;return{suggestions:t.map((function(t,r){return{kind:$n(t.type,e),label:t.label,insertText:t.insertText,detail:t.detail,documentation:t.documentation,sortText:r.toString().padStart(n,"0"),range:o,command:t.triggerOnInsert?{id:"editor.action.triggerSuggest",title:""}:void 0}}))}}))}}}function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qn.apply(this,arguments)}function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e){var n=e.query,r=e.onChange,i=e.runQuery,o=e.datasource,s=Fn((0,y.useState)([]),2),a=s[0],l=s[1],u=Fn((0,y.useState)([]),2),c=u[0],f=u[1],h=Fn((0,y.useState)([{label:"upper",value:"upper"},{label:"lower",value:"lower"},{label:"baseline",value:"baseline"},{label:"anomaly",value:"anomaly"},{label:"significance",value:"significance"}]),1)[0],p=Fn((0,y.useState)((null==n?void 0:n.A_Realtime_Save)||""),2),d=p[0],g=p[1],O=Fn((0,y.useState)((null==n?void 0:n.series)||""),2),b=O[0],E=O[1],w=Fn((0,y.useState)("TaskId"),2),T=w[0],q=w[1],x=Fn((0,y.useState)([{label:"TaskId",value:"TaskId"},{label:"Expr",value:"Expr"}]),1)[0],S=function(e){g(e.value),r(Qn({},n,{A_Realtime_Save:e.value,queryType:"realtimeResultSingle"}))};return(0,y.useEffect)((function(){(0,t.getBackendSrv)().post("/api/datasources/".concat(o.id,"/resources/realtimeTaskList")).then((function(e){var t=(null==e?void 0:e.data)||[],n=null==t?void 0:t.map((function(e){return{label:"".concat((null==o?void 0:o.name)||"","-").concat(e.taskId),value:e.taskId}}));l(n);var r=null==t?void 0:t.map((function(e){return{label:e.query,value:e.taskId}}));f(r)}))}),[o]),m().createElement(m().Fragment,null,m().createElement("div",{style:{display:"flex",justifyContent:"flex-end",margin:"10px",marginRight:"40px"}},m().createElement(v.Button,{disabled:!d||!b,size:"sm",type:"button",icon:"sync",onClick:i},"Run queries")),m().createElement("div",{className:"gf-form gf-form-switch-container"},m().createElement("div",{className:"gf-form-label",style:{padding:0}},m().createElement(v.Select,{value:T,placeholder:"taskId",allowCustomValue:!0,onChange:function(e){q(e.value)},options:x})),"TaskId"===T?m().createElement(v.Select,{value:d,placeholder:"TaskId",onChange:S,options:a}):m().createElement(v.Select,{value:d,placeholder:"Exer",onChange:S,options:c})),m().createElement("div",{className:"gf-form gf-form-switch-container"},Pn||(Pn=m().createElement("div",{className:"gf-form-label"},"Series")),m().createElement(v.Select,{value:b,placeholder:"Series",allowCustomValue:!0,onChange:function(e){E(e.value),r(Qn({},n,{series:e.value,queryType:"realtimeResultSingle"}))},options:h})))}function Un(e){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(e)}var Gn=["__name__"];function Yn(){Yn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),a=new x(i||[]);return r(s,"_invoke",{value:E(e,n,a)}),s}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function p(){}function d(){}var g={};l(g,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==t&&n.call(m,o)&&(g=m);var v=d.prototype=h.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,s,a){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Un(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,a)}),(function(e){i("throw",e,s,a)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return i("throw",e,s,a)}))}a(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},O(b.prototype),l(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},O(v),l(v,a,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(q),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;q(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Wn(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function jn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){Wn(o,r,i,s,a,"next",e)}function a(e){Wn(o,r,i,s,a,"throw",e)}s(void 0)}))}}function Kn(e){return function(e){if(Array.isArray(e))return Vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hn.apply(this,arguments)}function zn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function er(e,t){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},er(e,t)}function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ir(e);if(t){var i=ir(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nr(this,n)}}function nr(e,t){if(t&&("object"===Un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rr(e)}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ir(e)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ar(e){return e.slice(0,1e4)}function lr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};e.forEach((function(e){var r=e.__name__,i=sr(e,Gn);t&&(n.__name__=n.__name__||new Set,n.__name__.has(r)||n.__name__.add(r)),Object.keys(i).forEach((function(e){n[e]||(n[e]=new Set),n[e].has(i[e])||n[e].add(i[e])}))}));var r={};return ar(Object.keys(n)).forEach((function(e){r[e]=ar(Array.from(n[e]))})),{values:r,keys:Object.keys(r)}}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&er(e,t)}(o,e);var t,n,r,i=tr(o);function o(){var e;Zn(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return or(rr(e=i.call.apply(i,[this].concat(n))),"state",{placeholder:"Enter a PromQL query",algorithmList:[{label:"Auto",value:"-1"}],expr:"",A_Realtime_Save:"",errorText:"",styles:{container:(0,I.css)(_n||(_n=zn(["\n        border-radius: 20px;\n        border: 1px solid grey;\n      "]))),placeholder:(0,I.css)(Nn||(Nn=zn(["\n        ::after {\n          content: 'Enter a PromQL query';\n          opacity: 0.3;\n        }\n      "])))}}),or(rr(e),"onQueryTextChange",(function(t){var n=e.props,r=n.onChange,i=n.query;e.setState({expr:t,errorText:""}),r(Hn({},i,{expr:t}))})),or(rr(e),"onGenericIdChange",(function(t){var n=e.props;(0,n.onChange)(Hn({},n.query,{genericId:null==t?void 0:t.value}))})),or(rr(e),"onAlerRuleListChange",(function(t){var n=e.props;(0,n.onChange)(Hn({},n.query,{alertTemplateId:null==t?void 0:t.value}))})),or(rr(e),"alertEnableChange",(function(t){var n=e.props,r=n.onChange,i=n.query,o=n.datasource;r(Hn({},i,{alertEnable:t.currentTarget.checked})),t.currentTarget.checked?e.props.datasource.createAlert({alertTemplateId:i.alertTemplateId,taskId:e.state.A_Realtime_Save},o):e.props.datasource.removeAlert({taskId:e.state.A_Realtime_Save},o)})),or(rr(e),"onRunQueries",(function(){(0,e.props.onRunQuery)()})),or(rr(e),"onChangeQuery",(function(){})),or(rr(e),"realtimeCheckChange",(function(t){var n,r=e.props,i=r.onChange,o=r.query,s=r.data,a=r.datasource;r.range;if(null!=s&&null!==(n=s.request)&&void 0!==n&&n.panelId){var l=Hn({},o,null==s?void 0:s.request);delete l.range,delete l.rangeRaw,delete l.targets,delete l.scopedVars,t.currentTarget.checked?e.props.datasource.realtimeTaskSave(l,a).then((function(t){if("error"!==t.status){var n="";try{var r;n=null==t||null===(r=t.data)||void 0===r?void 0:r.taskId}catch(e){n=""}e.setState({A_Realtime_Save:n}),i(Hn({},o,{queryType:"realtimeCheck",A_Realtime_Save:n}))}else i(Hn({},o,{queryType:"syncPreview"}))})):(l=Hn({},o,{taskId:e.state.A_Realtime_Save}),e.props.datasource.realtimeTaskRemove(l,a).then((function(t){"error"!==t.status?(e.setState({A_Realtime_Save:""}),i(Hn({},o,{queryType:"syncPreview",A_Realtime_Save:""}))):i(Hn({},o,{queryType:"realtimeCheck"}))})))}else e.setState({errorText:"You can associate only after saving. Please save first!"})})),e}return t=o,n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.data,r=t.range,i=t.datasource,o=t.query;null!=o&&o.expr&&this.setState({expr:null==o?void 0:o.expr}),null!=o&&o.A_Realtime_Save&&this.setState({A_Realtime_Save:null==o?void 0:o.A_Realtime_Save});var s=Hn({},o,null==n?void 0:n.request,{from:new Date(null==r?void 0:r.from).getTime()+"",to:new Date(null==r?void 0:r.to).getTime()+""});delete s.range,delete s.rangeRaw,delete s.targets,delete s.scopedVars,this.props.datasource.algorithmList(s,i).then((function(t){var n,r=null===(n=(null==t?void 0:t.data)||[])||void 0===n?void 0:n.map((function(e){var t=JSON.parse(e);return{label:null==t?void 0:t.name,value:null==t?void 0:t.id}}));e.setState({algorithmList:[{label:"Auto",value:"-1"}].concat(Kn(r))})}))}},{key:"editorWillMount",value:function(e){for(var t=["sum","min","max","avg","group","stddev","stdvar","count","count_values","bottomk","topk","quantile"],n=[],r=0,i=t;r<i.length;r++){var o=i[r];n.push(o+"_over_time")}var s=["on","ignoring","group_right","group_left","by","without"],a="("+s.reduce((function(e,t){return e+"|"+t}))+")",l=t.concat(["abs","absent","ceil","changes","clamp_max","clamp_min","day_of_month","day_of_week","days_in_month","delta","deriv","exp","floor","histogram_quantile","holt_winters","hour","idelta","increase","irate","label_join","label_replace","ln","log2","log10","minute","month","predict_linear","rate","resets","round","scalar","sort","sort_desc","sqrt","time","timestamp","vector","year"]).concat(n).concat(s).concat(["offset"]),u={ignoreCase:!1,defaultToken:"",tokenPostfix:".promql",keywords:l,operators:["+","-","*","/","%","^","==","!=",">","<",">=","<=","and","or","unless"],vectorMatching:a,symbols:/[=><!~?:&|+\-*\/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,integersuffix:/(ll|LL|u|U|l|L)?(ll|LL|u|U|l|L)?/,floatsuffix:/[fFlL]?/,tokenizer:{root:[[/@vectorMatching\s*(?=\()/,"type","@clauses"],[/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,"tag"],[/(^#.*$)/,"comment"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"type","@default":"identifier"}}],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/\d+[smhdwy]/,"number"],[/\d*\d+[eE]([\-+]?\d+)?(@floatsuffix)/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?(@floatsuffix)/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F](@integersuffix)/,"number.hex"],[/0[0-7']*[0-7](@integersuffix)/,"number.octal"],[/0[bB][0-1']*[0-1](@integersuffix)/,"number.binary"],[/\d[\d']*\d(@integersuffix)/,"number"],[/\d(@integersuffix)/,"number"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],clauses:[[/[^(,)]/,"tag"],[/\)/,"identifier","@pop"]],whitespace:[[/[ \t\r\n]+/,"white"]]}},c={provideCompletionItems:function(){return{suggestions:l.map((function(t){return{label:t,kind:e.languages.CompletionItemKind.Keyword,insertText:t,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}}))}}},f="promql";e.languages.register({id:"promql",extensions:[".promql"],aliases:["Prometheus","prometheus","prom","Prom","promql","Promql","promQL","PromQL"],mimetypes:[]}),e.languages.setMonarchTokensProvider(f,u),e.languages.setLanguageConfiguration(f,{wordPattern:/(-?\d*\.\d\w*)|([^`~!#%^&*()\-=+\[{\]}\\|;:'",.<>\/?\s]+)/g,comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}],folding:{}}),e.languages.registerCompletionItemProvider(f,c)}},{key:"render",value:function(){var e,t,n=this,r=(0,_.defaults)(this.props.query,N),i=r.expr,o=r.genericId,s=void 0===o?"":o,a=r.queryType;return m().createElement(m().Fragment,null,-1!==window.location.href.indexOf("/alerting")&&m().createElement("div",{style:{width:"100%"}},m().createElement(Xn,{datasource:this.props.datasource,query:r,onChange:this.props.onChange,runQuery:this.props.onRunQuery})),-1===window.location.href.indexOf("/alerting")&&m().createElement("div",{style:{width:"100%"}},m().createElement("div",{style:{display:"flex",justifyContent:"flex-end",margin:"10px",marginRight:"40px"}},m().createElement(v.Button,{disabled:!this.state.expr,size:"sm",type:"button",icon:"sync",onClick:this.onRunQueries},"Run queries")),m().createElement("div",{style:{justifyContent:"space-between",width:"100%"},className:"gf-form"},m().createElement("div",{style:{width:"100%"},className:"gf-form gf-form-switch-container"},In||(In=m().createElement("div",{className:"gf-form-label"},"Query")),m().createElement(v.ReactMonacoEditor,{className:"ReactMonacoEditor",options:{codeLens:!1,contextmenu:!1,fixedOverflowWidgets:!0,folding:!1,fontSize:14,lineDecorationsWidth:8,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:4,bottom:5},renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,suggest:{showWords:!1},suggestFontSize:12,wordWrap:"on"},language:"promql",value:i||"",beforeMount:this.editorWillMount,onChange:this.onQueryTextChange,onMount:function(e,t){var r,i=n.props,o=i.datasource,s=i.range,a=function(){var e=jn(Yn().mark((function e(t){var r,i,a,l,u;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==s?void 0:s.from.utc().format("YYYY-MM-DD HH:mm"),i=null==s?void 0:s.to.utc().format("YYYY-MM-DD HH:mm"),e.next=4,n.props.datasource.getSeries({start:new Date(r).getTime(),end:new Date(i).getTime(),"match[]":t},o);case 4:return a=e.sent,l=lr(null==a?void 0:a.data),u=l.values,e.abrupt("return",Promise.resolve(u));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=jn(Yn().mark((function e(){var t,r,i,a,l;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==s?void 0:s.from.utc().format("YYYY-MM-DD HH:mm"),i=null==s?void 0:s.to.utc().format("YYYY-MM-DD HH:mm"),e.next=4,n.props.datasource.getMetrics({start:new Date(r).getTime(),end:new Date(i).getTime()},o);case 4:return a=e.sent,l=null==a||null===(t=a.data)||void 0===t?void 0:t.map((function(e){return{name:e,help:"",type:""}})),e.abrupt("return",Promise.resolve(l));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=jn(Yn().mark((function e(){var t,r,i;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null==s?void 0:s.from.utc().format("YYYY-MM-DD HH:mm"),r=null==s?void 0:s.to.utc().format("YYYY-MM-DD HH:mm"),e.next=4,n.props.datasource.getLabelNames({start:new Date(t).getTime(),end:new Date(r).getTime()},o);case 4:return i=e.sent,e.abrupt("return",Promise.resolve(i.data.slice().sort()));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=Mn(t,{getSeries:a,getAllMetricNames:l,getAllLabelNames:u}),f=Hn({},c,{provideCompletionItems:function(e,t,n,r){return c.provideCompletionItems(e,t,n,r)}});t.languages.registerCompletionItemProvider("promql",f);var h=function(){var t=document.querySelector(".ReactMonacoEditor");if(null!==t){var n=e.getContentHeight();t.style.height="".concat(n+2,"px"),t.style.width="calc(100%-20px)";var r=t.clientWidth;e.layout({width:r,height:n})}};if(e.onDidContentSizeChange(h),h(),null===(r=e.getModel())||void 0===r||r.onDidChangeContent((function(){})),n.state.placeholder){var p=[{range:new t.Range(1,1,1,1),options:{className:n.state.styles.placeholder,isWholeLine:!0}}],d=[],g=function(){var t=e.getModel();if(t){var n=0===t.getValueLength()?p:[];d=t.deltaDecorations(d,n)}};g(),e.onDidChangeModelContent(g)}}}))),m().createElement("div",{className:"gf-form gf-form-switch-container"},Ln||(Ln=m().createElement("div",{className:"gf-form-label"},"AI model")),m().createElement(v.Select,{value:s,placeholder:"algorithm",allowCustomValue:!0,onChange:this.onGenericIdChange,options:this.state.algorithmList})),m().createElement("div",{className:"gf-form"},m().createElement(Q,{disabled:!(null!==(e=this.props.data)&&void 0!==e&&null!==(t=e.request)&&void 0!==t&&t.panelId),value:"realtimeCheck"===a,label:"Start real time monitoring",onChange:this.realtimeCheckChange})),m().createElement("div",{className:"gf-form"},m().createElement("span",{style:{color:"grey",lineHeight:"30px"}},this.state.errorText))))}}],n&&Jn(t.prototype,n),r&&Jn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(y.PureComponent),cr=new e.DataSourcePlugin(g).setConfigEditor(P).setQueryEditor(ur)})(),u})()));
//# sourceMappingURL=module.js.map